{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useNotes.js\nimport { useState, useEffect } from 'react';\nconst useNotes = () => {\n  _s();\n  const [notes, setNotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchNotes();\n  }, []);\n  const fetchNotes = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/notes');\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(data);\n      } else {\n        console.error('Failed to fetch notes:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error fetching notes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const createNote = async noteData => {\n    try {\n      const response = await fetch('/api/notes/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(noteData)\n      });\n      if (response.ok) {\n        const newNote = await response.json();\n        setNotes(prevNotes => [newNote, ...prevNotes]);\n        return newNote;\n      } else {\n        throw new Error(`Failed to create note: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Error creating note:', error);\n      throw error;\n    }\n  };\n  const updateNote = async (id, noteData) => {\n    try {\n      console.log('Original noteData:', noteData); // Debug log\n\n      // Convert tags array to string if needed\n      const dataToSend = {\n        ...noteData,\n        tags: Array.isArray(noteData.tags) ? noteData.tags.join(',') : noteData.tags\n      };\n      console.log('Data being sent to backend:', dataToSend); // Debug log\n      console.log('Updating note with ID:', id); // Debug log\n\n      const response = await fetch(`/api/notes/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dataToSend)\n      });\n      console.log('Response status:', response.status); // Debug log\n      console.log('Response ok:', response.ok); // Debug log\n\n      if (response.ok) {\n        const updatedNote = await response.json();\n        console.log('Updated note received:', updatedNote); // Debug log\n\n        setNotes(prevNotes => prevNotes.map(note => note.id === id ? updatedNote : note));\n        return updatedNote;\n      } else {\n        const errorText = await response.text();\n        console.error('Backend error response:', errorText); // Debug log\n        throw new Error(`Failed to update note: ${response.status} - ${errorText}`);\n      }\n    } catch (error) {\n      console.error('Error updating note:', error);\n      throw error;\n    }\n  };\n  const deleteNote = async id => {\n    try {\n      const response = await fetch(`/api/notes/${id}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        setNotes(prevNotes => prevNotes.filter(note => note.id !== id));\n      } else {\n        throw new Error(`Failed to delete note: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Error deleting note:', error);\n      throw error;\n    }\n  };\n  return {\n    notes,\n    loading,\n    createNote,\n    updateNote,\n    deleteNote,\n    refreshNotes: fetchNotes\n  };\n};\n_s(useNotes, \"I4K4w9oJpuKUIeK96G/eoa0AU7g=\");\nexport default useNotes;","map":{"version":3,"names":["useState","useEffect","useNotes","_s","notes","setNotes","loading","setLoading","fetchNotes","response","fetch","ok","data","json","console","error","statusText","createNote","noteData","method","headers","body","JSON","stringify","newNote","prevNotes","Error","status","updateNote","id","log","dataToSend","tags","Array","isArray","join","updatedNote","map","note","errorText","text","deleteNote","filter","refreshNotes"],"sources":["/Users/jenn/Projects/Pixel-Pages/frontend/src/hooks/useNotes.js"],"sourcesContent":["// src/hooks/useNotes.js\nimport { useState, useEffect } from 'react';\n\nconst useNotes = () => {\n  const [notes, setNotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchNotes();\n  }, []);\n\n  const fetchNotes = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/notes');\n      if (response.ok) {\n        const data = await response.json();\n        setNotes(data);\n      } else {\n        console.error('Failed to fetch notes:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error fetching notes:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const createNote = async (noteData) => {\n    try {\n      const response = await fetch('/api/notes/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(noteData)\n      });\n\n      if (response.ok) {\n        const newNote = await response.json();\n        setNotes(prevNotes => [newNote, ...prevNotes]);\n        return newNote;\n      } else {\n        throw new Error(`Failed to create note: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Error creating note:', error);\n      throw error;\n    }\n  };\n\n  const updateNote = async (id, noteData) => {\n    try {\n      console.log('Original noteData:', noteData); // Debug log\n      \n      // Convert tags array to string if needed\n      const dataToSend = {\n        ...noteData,\n        tags: Array.isArray(noteData.tags) \n          ? noteData.tags.join(',') \n          : noteData.tags\n      };\n\n      console.log('Data being sent to backend:', dataToSend); // Debug log\n      console.log('Updating note with ID:', id); // Debug log\n\n      const response = await fetch(`/api/notes/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(dataToSend)\n      });\n\n      console.log('Response status:', response.status); // Debug log\n      console.log('Response ok:', response.ok); // Debug log\n\n      if (response.ok) {\n        const updatedNote = await response.json();\n        console.log('Updated note received:', updatedNote); // Debug log\n        \n        setNotes(prevNotes => \n          prevNotes.map(note => note.id === id ? updatedNote : note)\n        );\n        return updatedNote;\n      } else {\n        const errorText = await response.text();\n        console.error('Backend error response:', errorText); // Debug log\n        throw new Error(`Failed to update note: ${response.status} - ${errorText}`);\n      }\n    } catch (error) {\n      console.error('Error updating note:', error);\n      throw error;\n    }\n  };\n\n  const deleteNote = async (id) => {\n    try {\n      const response = await fetch(`/api/notes/${id}`, {\n        method: 'DELETE'\n      });\n\n      if (response.ok) {\n        setNotes(prevNotes => prevNotes.filter(note => note.id !== id));\n      } else {\n        throw new Error(`Failed to delete note: ${response.status}`);\n      }\n    } catch (error) {\n      console.error('Error deleting note:', error);\n      throw error;\n    }\n  };\n\n  return {\n    notes,\n    loading,\n    createNote,\n    updateNote,\n    deleteNote,\n    refreshNotes: fetchNotes\n  };\n};\n\nexport default useNotes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
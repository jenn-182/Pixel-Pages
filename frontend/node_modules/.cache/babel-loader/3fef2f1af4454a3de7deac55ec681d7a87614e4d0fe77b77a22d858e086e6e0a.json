{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{Plus,Folder,BookOpen,FileText,Search,Download,Archive,Eye,Trash2}from'lucide-react';import PixelButton from'../PixelButton';import PixelInput from'../PixelInput';import useFolders from'../../hooks/useFolders';import useNotebooks from'../../hooks/useNotebooks';import useNotes from'../../hooks/useNotes';import NoteModal from'../notes/NoteModal';import FolderModal from'../modals/FolderModal';import NotebookModal from'../modals/NotebookModal';import FolderView from'../views/FolderView';import NotebookView from'../views/NotebookView';import NoteListView from'../views/NoteListView';import NotebookListView from'../views/NotebookListView';import FolderListView from'../views/FolderListView';import{useNotification}from'../../contexts/NotificationContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LibraryTab=_ref=>{let{tabColor='#3B82F6',navigationParams={}}=_ref;const[searchTerm,setSearchTerm]=useState('');const[viewMode,setViewMode]=useState('grid');const[isCreateNoteModalOpen,setIsCreateNoteModalOpen]=useState(false);const[isFolderModalOpen,setIsFolderModalOpen]=useState(false);const[isNotebookModalOpen,setIsNotebookModalOpen]=useState(false);const[editingFolder,setEditingFolder]=useState(null);const[editingNotebook,setEditingNotebook]=useState(null);const[editingNote,setEditingNote]=useState(null);const[currentView,setCurrentView]=useState('library');const[selectedFolder,setSelectedFolder]=useState(null);const[selectedNotebook,setSelectedNotebook]=useState(null);const[defaultFolderId,setDefaultFolderId]=useState(null);// ✅ Add this line\nconst[defaultNotebookId,setDefaultNotebookId]=useState(null);// ✅ Add this line too for consistency\n// Use the hooks\nconst{folders,loading:foldersLoading,createFolder,updateFolder,deleteFolder}=useFolders();const{notebooks,loading:notebooksLoading,createNotebook,updateNotebook,deleteNotebook}=useNotebooks();const{notes,loading:notesLoading,createNote,updateNote,deleteNote}=useNotes();const{showNotification}=useNotification();const loading=foldersLoading||notebooksLoading||notesLoading;// Convert hex to RGB for dynamic styling\nconst hexToRgb=hex=>{const result=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);return result?\"\".concat(parseInt(result[1],16),\", \").concat(parseInt(result[2],16),\", \").concat(parseInt(result[3],16)):'59, 130, 246';// fallback for #3B82F6\n};const tabColorRgb=hexToRgb(tabColor);// All handlers remain the same...\nconst handleDeleteNote=async noteId=>{if(window.confirm('Are you sure you want to delete this log entry? This action cannot be undone.')){try{await deleteNote(noteId);showNotification('Log entry deleted successfully!','success');}catch(error){console.error('Failed to delete note:',error);showNotification('Failed to delete log entry. Please try again.','error');}}};const handleDeleteNotebook=async notebookId=>{if(window.confirm('Are you sure you want to delete this collection? All associated notes will become unorganized.')){try{console.log('Deleting notebook with ID:',notebookId);await deleteNotebook(notebookId);showNotification('Collection deleted successfully!','success');}catch(error){console.error('Failed to delete notebook:',error);console.error('Error details:',error.message);showNotification('Failed to delete collection. Please try again.','error');}}};const handleDeleteFolder=async folderId=>{if(window.confirm('Are you sure you want to delete this archive? All associated notes and collections will become unorganized.')){try{await deleteFolder(folderId);showNotification('Archive deleted successfully!','success');}catch(error){console.error('Failed to delete folder:',error);showNotification('Failed to delete archive. Please try again.','error');}}};// All other handlers remain the same...\nconst handleCreateFolder=async()=>{try{const folderData={name:\"New Archive \".concat(folders.length+1),description:'A new archive for organizing your intel',colorCode:'#FFD700',parentFolderId:null};await createFolder(folderData);}catch(error){console.error('Failed to initialize archive:',error);}};const handleCreateNotebook=async()=>{try{const notebookData={name:\"New Collection \".concat(notebooks.length+1),description:'A new log collection for your intel',colorCode:'#87CEEB'};await createNotebook(notebookData);}catch(error){console.error('Failed to deploy collection:',error);}};const handleCreateNote=()=>{setIsCreateNoteModalOpen(true);};const handleEditNote=note=>{setEditingNote(note);setIsCreateNoteModalOpen(true);};const handleCreateNoteSubmit=async noteData=>{try{console.log('Archiving log entry:',{editingNote,noteData});if(editingNote){console.log('Updating log entry with ID:',editingNote.id);await updateNote(editingNote.id,noteData);console.log('Log entry updated successfully');}else{console.log('Creating new log entry');await createNote(noteData);console.log('Log entry archived successfully');}setEditingNote(null);setIsCreateNoteModalOpen(false);}catch(error){console.error('Failed to archive log entry:',error);alert('Failed to archive log entry. Please try again.');}};const handleEditFolder=folder=>{setEditingFolder(folder);setIsFolderModalOpen(true);};const handleOpenFolder=folder=>{setSelectedFolder(folder);setCurrentView('folder');};const handleOpenNotebook=notebook=>{setSelectedNotebook(notebook);setCurrentView('notebook');};const handleBackToLibrary=()=>{// Clear all states when going back\nsetCurrentView('library');setSelectedFolder(null);setSelectedNotebook(null);setEditingNote(null);setEditingNotebook(null);setEditingFolder(null);setIsCreateNoteModalOpen(false);setIsNotebookModalOpen(false);setIsFolderModalOpen(false);};const handleViewAllNotes=()=>{setCurrentView('allNotes');};const handleEditNoteFromList=note=>{setEditingNote(note);setIsCreateNoteModalOpen(true);setCurrentView('library');};const handleViewAllNotebooks=()=>{setCurrentView('allNotebooks');};const handleViewAllFolders=()=>{setCurrentView('allFolders');};const handleFolderSave=async function(idOrData){let folderData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{if(editingFolder&&folderData){await updateFolder(idOrData,folderData);}else{await createFolder(idOrData);}setEditingFolder(null);}catch(error){console.error('Failed to save archive:',error);}};const handleEditNotebook=notebook=>{setEditingNotebook(notebook);setIsNotebookModalOpen(true);};const handleNotebookSave=async function(idOrData){let notebookData=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{console.log('handleNotebookSave called with:',{idOrData,notebookData,editingNotebook});if(editingNotebook&&notebookData){console.log('Updating notebook with folderId:',notebookData.folderId);await updateNotebook(idOrData,notebookData);}else{console.log('Creating notebook with folderId:',idOrData.folderId);await createNotebook(idOrData);}setEditingNotebook(null);setIsNotebookModalOpen(false);}catch(error){var _error$response;console.error('Failed to save collection:',error);console.error('Error details:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);}};// Helper functions to calculate counts\nconst getNotebookNoteCount=notebookId=>{return notes.filter(note=>note.notebookId===notebookId).length;};const getFolderItemCount=folderId=>{const folderNotes=notes.filter(note=>note.folderId===folderId);const folderNotebooks=notebooks.filter(notebook=>notebook.folderId===folderId);return folderNotes.length+folderNotebooks.length;};useEffect(()=>{if((navigationParams===null||navigationParams===void 0?void 0:navigationParams.view)==='allNotes'){setCurrentView('allNotes');}else if((navigationParams===null||navigationParams===void 0?void 0:navigationParams.view)==='folder'&&navigationParams!==null&&navigationParams!==void 0&&navigationParams.selectedFolder){setCurrentView('folder');setSelectedFolder(navigationParams.selectedFolder);}},[navigationParams]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"library-tab-container p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 font-mono text-white\",children:[/*#__PURE__*/_jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:Infinity,ease:\"linear\"},className:\"inline-block mb-4\",children:/*#__PURE__*/_jsx(Archive,{size:32,style:{color:tabColor}})}),/*#__PURE__*/_jsx(\"div\",{children:\"Accessing intelligence archives...\"})]})});}// View routing remains the same but with updated colors...\nif(currentView==='folder'&&selectedFolder){// Get notebooks in this folder\nconst folderNotebooks=notebooks.filter(notebook=>notebook.folderId===selectedFolder.id);const notebookIds=folderNotebooks.map(nb=>nb.id);// Get notes that are either:\n// 1. Directly assigned to this folder (folderId matches)\n// 2. Belong to notebooks within this folder (notebookId matches)\nconst folderNotes=notes.filter(note=>note.folderId===selectedFolder.id||note.notebookId&&notebookIds.includes(note.notebookId));return/*#__PURE__*/_jsx(\"div\",{className:\"library-tab-container p-6\",children:/*#__PURE__*/_jsx(FolderView,{folder:selectedFolder,onBack:handleBackToLibrary,onCreateNote:()=>{setEditingNote(null);setDefaultFolderId(selectedFolder.id);// Set default folder\nsetIsCreateNoteModalOpen(true);},onEditNote:handleEditNote,onDeleteNote:handleDeleteNote,onDeleteNotebook:handleDeleteNotebook,onOpenNotebook:handleOpenNotebook,onCreateNotebook:()=>{setEditingNotebook(null);setDefaultFolderId(selectedFolder.id);// Set default folder\nsetIsNotebookModalOpen(true);},onEditNotebook:handleEditNotebook,folders:folders,notebooks:folderNotebooks,notes:folderNotes})});}if(currentView==='notebook'&&selectedNotebook){return/*#__PURE__*/_jsx(\"div\",{className:\"library-tab-container p-6\",children:/*#__PURE__*/_jsx(NotebookView,{notebook:selectedNotebook,onBack:handleBackToLibrary,onCreateNote:handleCreateNoteSubmit,onEditNote:handleCreateNoteSubmit,onDeleteNotebook:handleDeleteNotebook,folders:folders,notebooks:notebooks,notes:notes})});}if(currentView==='allNotes'){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NoteListView,{notes:notes,onBack:()=>setCurrentView('library'),onCreateNote:()=>{setEditingNote(null);setIsCreateNoteModalOpen(true);},onEditNote:handleEditNoteFromList,folders:folders,notebooks:notebooks}),/*#__PURE__*/_jsx(NoteModal,{isOpen:isCreateNoteModalOpen,onClose:()=>{setIsCreateNoteModalOpen(false);setEditingNote(null);setDefaultFolderId(null);// ✅ Reset on close\nsetDefaultNotebookId(null);// ✅ Reset on close\n},onSave:handleCreateNoteSubmit,onDelete:handleDeleteNote,folders:folders,notebooks:notebooks,existingNote:editingNote,defaultFolderId:defaultFolderId// ✅ Pass the default folder\n,defaultNotebookId:defaultNotebookId// ✅ Pass the default notebook\n})]});}if(currentView==='allNotebooks'){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NotebookListView,{notebooks:notebooks,onBack:()=>setCurrentView('library'),onCreateNotebook:()=>{setEditingNotebook(null);setIsNotebookModalOpen(true);},onEditNotebook:handleEditNotebook,onDeleteNotebook:handleDeleteNotebook,onOpenNotebook:handleOpenNotebook,folders:folders}),/*#__PURE__*/_jsx(NotebookModal,{isOpen:isNotebookModalOpen,onClose:()=>{setIsNotebookModalOpen(false);setEditingNotebook(null);setDefaultFolderId(null);// ✅ Reset on close\n},onSave:handleNotebookSave,existingNotebook:editingNotebook,folders:folders,defaultFolderId:defaultFolderId// ✅ Pass the default folder\n})]});}if(currentView==='allFolders'){return/*#__PURE__*/_jsx(\"div\",{className:\"library-tab-container\",children:/*#__PURE__*/_jsx(FolderListView,{folders:folders,onBack:handleBackToLibrary,onCreateFolder:()=>setIsFolderModalOpen(true),onEditFolder:handleEditFolder,onOpenFolder:handleOpenFolder})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"library-tab-container p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-4 mb-6 relative\",style:{backgroundColor:'rgba(0, 0, 0, 0.4)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-mono font-bold text-white text-3xl\",children:\"STORAGE VAULT\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-mono text-xs text-gray-400\",children:\"Storage for logs, collections, and archives\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-xs font-mono text-gray-400\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold\",children:folders.length}),\" ARCHIVES\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold\",children:notebooks.length}),\" COLLECTIONS\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold\",children:notes.length}),\" LOGS\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-5 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsCreateNoteModalOpen(true),className:\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\",children:[/*#__PURE__*/_jsx(FileText,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"NEW LOG\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsNotebookModalOpen(true),className:\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\",children:[/*#__PURE__*/_jsx(BookOpen,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"NEW COLLECTION\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsFolderModalOpen(true),className:\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\",children:[/*#__PURE__*/_jsx(Folder,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"NEW ARCHIVE\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{try{console.log('Exporting all intelligence from Archive Terminal');const response=await fetch(\"/api/notes/export/all?username=user\");if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"intelligence_export_\".concat(new Date().toISOString().slice(0,10),\".md\");document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);showNotification('Intelligence data exported successfully! Check your Downloads folder.','success');}else{throw new Error('Export failed');}}catch(error){console.error('Export error:',error);showNotification('Export failed. Please try again later.','error');}},className:\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\",children:[/*#__PURE__*/_jsx(Download,{size:14}),/*#__PURE__*/_jsx(\"span\",{children:\"EXPORT ALL\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{size:14,className:\"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Search...\",className:\"w-full pl-8 pr-3 py-2 bg-black border border-gray-600 text-white font-mono text-xs focus:border-white transition-colors\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\",style:{backgroundColor:'rgba(0, 0, 0, 0.4)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-mono font-bold text-white flex items-center\",children:[\"ARCHIVES (\",folders.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-mono text-gray-400\",children:\"Archive systems for organizing multiple collections and logs.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewAllFolders,className:\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Eye,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"VIEW ALL\"})]})})]}),folders.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\",children:folders.slice(0,4).map(folder=>{const folderColor=folder.colorCode||'#FFD700';const rgbColor=folderColor.startsWith('#')?\"\".concat(parseInt(folderColor.slice(1,3),16),\", \").concat(parseInt(folderColor.slice(3,5),16),\", \").concat(parseInt(folderColor.slice(5,7),16)):'251, 191, 36';const itemCount=getFolderItemCount(folder.id);return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\",style:{borderColor:folderColor,boxShadow:\"0 0 10px rgba(\".concat(rgbColor,\", 0.4), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileHover:{scale:1.02,y:-2,boxShadow:\"0 0 20px rgba(\".concat(rgbColor,\", 0.6), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileTap:{scale:0.98},onClick:()=>handleOpenFolder(folder),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsx(Folder,{size:24,style:{color:folderColor}}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\",children:[itemCount,\" ITEMS\"]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-mono font-bold text-white mb-2 truncate\",children:folder.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mb-3\",children:folder.description||'Access archive contents'}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleEditFolder(folder);},className:\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\",style:{color:tabColor},title:\"Modify archive\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteFolder(folder.id);},className:\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\",title:\"Delete archive\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},folder.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 border border-gray-600 p-6 text-center\",children:[/*#__PURE__*/_jsx(Folder,{size:48,className:\"text-gray-500 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 font-mono\",children:\"No archive systems found. Initialize first archive storage.\"})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.1},className:\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\",style:{backgroundColor:'rgba(0, 0, 0, 0.4)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-mono font-bold text-white flex items-center\",children:[\"COLLECTIONS (\",notebooks.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-mono text-gray-400\",children:\"Organized collections for grouping logs by subject, project or types.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewAllNotebooks,className:\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Eye,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"VIEW ALL\"})]})})]}),notebooks.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\",children:notebooks.slice(0,4).map(notebook=>{const notebookColor=notebook.colorCode||'#60A5FA';const rgbColor=notebookColor.startsWith('#')?\"\".concat(parseInt(notebookColor.slice(1,3),16),\", \").concat(parseInt(notebookColor.slice(3,5),16),\", \").concat(parseInt(notebookColor.slice(5,7),16)):'96, 165, 250';const noteCount=getNotebookNoteCount(notebook.id);return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\",style:{borderColor:notebookColor,boxShadow:\"0 0 10px rgba(\".concat(rgbColor,\", 0.4), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileHover:{scale:1.02,y:-2,boxShadow:\"0 0 20px rgba(\".concat(rgbColor,\", 0.6), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileTap:{scale:0.98},onClick:()=>handleOpenNotebook(notebook),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsx(BookOpen,{size:24,style:{color:notebookColor}}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\",children:[noteCount,\" LOGS\"]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-mono font-bold text-white mb-2 truncate\",children:notebook.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mb-3\",children:notebook.description||'Access collection database'}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleEditNotebook(notebook);},className:\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\",style:{color:tabColor},title:\"Edit collection\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteNotebook(notebook.id);},className:\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\",title:\"Delete collection\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},notebook.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 border border-gray-600 p-6 text-center\",children:[/*#__PURE__*/_jsx(BookOpen,{size:48,className:\"text-gray-500 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 font-mono\",children:\"No log collections found. Deploy first collection to begin.\"})]})]})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.2},className:\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\",style:{backgroundColor:'rgba(0, 0, 0, 0.4)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-mono font-bold text-white flex items-center\",children:[\"LOG ENTRIES (\",notes.length,\")\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-mono text-gray-400\",children:\"Individual log entries for storing notes, thoughts and ideas.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleViewAllNotes,className:\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Eye,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"VIEW ALL\"})]})})]}),notes.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\",children:notes.slice().sort((a,b)=>new Date(b.createdAt||b.updatedAt||0)-new Date(a.createdAt||a.updatedAt||0)).slice(0,4).map((note,index)=>{const noteColor=note.color||'#4ADE80';const rgbColor=hexToRgb(noteColor);const tagsArray=Array.isArray(note.tags)?note.tags:note.tags?note.tags.split(',').map(tag=>tag.trim()):[];return/*#__PURE__*/_jsxs(motion.div,{className:\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\",style:{borderColor:noteColor,boxShadow:\"0 0 10px rgba(\".concat(rgbColor,\", 0.4), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileHover:{scale:1.02,y:-2,boxShadow:\"0 0 20px rgba(\".concat(rgbColor,\", 0.6), 2px 2px 0px 0px rgba(0,0,0,1)\")},whileTap:{scale:0.98},onClick:()=>handleEditNote(note),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsx(FileText,{size:24,style:{color:noteColor}}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\",children:[tagsArray.length,\" TAGS\"]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-mono font-bold text-white mb-2 truncate\",title:note.title,children:note.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mb-3\",children:note.content&&note.content.length>100?\"\".concat(note.content.substring(0,100),\"...\"):note.content}),tagsArray.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1 mb-2\",children:[tagsArray.slice(0,2).map((tag,tagIndex)=>/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 bg-gray-700 border border-gray-600 text-xs font-mono\",style:{color:tabColor},children:tag},tagIndex)),tagsArray.length>2&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 font-mono px-2 py-1\",children:[\"+\",tagsArray.length-2]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 mb-2\",children:new Date(note.createdAt||note.updatedAt).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleEditNote(note);},className:\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\",style:{color:tabColor},title:\"Edit log entry\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"14\",height:\"14\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleDeleteNote(note.id);},className:\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\",title:\"Delete log entry\",children:/*#__PURE__*/_jsx(Trash2,{size:14})})]})]},note.id);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900 border border-gray-600 p-6 text-center\",children:[/*#__PURE__*/_jsx(FileText,{size:48,className:\"text-gray-500 mx-auto mb-3\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 font-mono\",children:\"No log entries found. Initialize first player log to begin.\"})]})]})})]}),/*#__PURE__*/_jsx(NoteModal,{isOpen:isCreateNoteModalOpen,onClose:()=>{setIsCreateNoteModalOpen(false);setEditingNote(null);setDefaultFolderId(null);// ✅ Reset on close\nsetDefaultNotebookId(null);// ✅ Reset on close\n},onSave:handleCreateNoteSubmit,onDelete:handleDeleteNote,folders:folders,notebooks:notebooks,existingNote:editingNote,defaultFolderId:defaultFolderId// ✅ Pass the default folder\n,defaultNotebookId:defaultNotebookId// ✅ Pass the default notebook\n}),/*#__PURE__*/_jsx(FolderModal,{isOpen:isFolderModalOpen,onClose:()=>{setIsFolderModalOpen(false);setEditingFolder(null);},onSave:handleFolderSave,existingFolder:editingFolder}),/*#__PURE__*/_jsx(NotebookModal,{isOpen:isNotebookModalOpen,onClose:()=>{setIsNotebookModalOpen(false);setEditingNotebook(null);setDefaultFolderId(null);// ✅ Reset on close\n},onSave:handleNotebookSave,existingNotebook:editingNotebook,folders:folders,defaultFolderId:defaultFolderId// ✅ Pass the default folder\n})]});};export default LibraryTab;","map":{"version":3,"names":["React","useState","useEffect","motion","Plus","Folder","BookOpen","FileText","Search","Download","Archive","Eye","Trash2","PixelButton","PixelInput","useFolders","useNotebooks","useNotes","NoteModal","FolderModal","NotebookModal","FolderView","NotebookView","NoteListView","NotebookListView","FolderListView","useNotification","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LibraryTab","_ref","tabColor","navigationParams","searchTerm","setSearchTerm","viewMode","setViewMode","isCreateNoteModalOpen","setIsCreateNoteModalOpen","isFolderModalOpen","setIsFolderModalOpen","isNotebookModalOpen","setIsNotebookModalOpen","editingFolder","setEditingFolder","editingNotebook","setEditingNotebook","editingNote","setEditingNote","currentView","setCurrentView","selectedFolder","setSelectedFolder","selectedNotebook","setSelectedNotebook","defaultFolderId","setDefaultFolderId","defaultNotebookId","setDefaultNotebookId","folders","loading","foldersLoading","createFolder","updateFolder","deleteFolder","notebooks","notebooksLoading","createNotebook","updateNotebook","deleteNotebook","notes","notesLoading","createNote","updateNote","deleteNote","showNotification","hexToRgb","hex","result","exec","concat","parseInt","tabColorRgb","handleDeleteNote","noteId","window","confirm","error","console","handleDeleteNotebook","notebookId","log","message","handleDeleteFolder","folderId","handleCreateFolder","folderData","name","length","description","colorCode","parentFolderId","handleCreateNotebook","notebookData","handleCreateNote","handleEditNote","note","handleCreateNoteSubmit","noteData","id","alert","handleEditFolder","folder","handleOpenFolder","handleOpenNotebook","notebook","handleBackToLibrary","handleViewAllNotes","handleEditNoteFromList","handleViewAllNotebooks","handleViewAllFolders","handleFolderSave","idOrData","arguments","undefined","handleEditNotebook","handleNotebookSave","_error$response","response","data","getNotebookNoteCount","filter","getFolderItemCount","folderNotes","folderNotebooks","view","className","children","div","animate","rotate","transition","duration","repeat","Infinity","ease","size","style","color","notebookIds","map","nb","includes","onBack","onCreateNote","onEditNote","onDeleteNote","onDeleteNotebook","onOpenNotebook","onCreateNotebook","onEditNotebook","isOpen","onClose","onSave","onDelete","existingNote","existingNotebook","onCreateFolder","onEditFolder","onOpenFolder","backgroundColor","onClick","fetch","ok","blob","url","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","slice","body","appendChild","click","revokeObjectURL","removeChild","Error","value","onChange","e","target","placeholder","initial","opacity","y","folderColor","rgbColor","startsWith","itemCount","borderColor","boxShadow","whileHover","scale","whileTap","stopPropagation","title","width","height","viewBox","fill","stroke","strokeWidth","d","delay","notebookColor","noteCount","sort","b","createdAt","updatedAt","index","noteColor","tagsArray","Array","isArray","tags","split","tag","trim","content","substring","tagIndex","toLocaleDateString","existingFolder"],"sources":["/Users/jenn/Projects/Pixel-Pages/frontend/src/components/tabs/LibraryTab.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Folder, BookOpen, FileText, Search, Download, Archive, Eye, Trash2 } from 'lucide-react';\nimport PixelButton from '../PixelButton';\nimport PixelInput from '../PixelInput';\nimport useFolders from '../../hooks/useFolders';\nimport useNotebooks from '../../hooks/useNotebooks';\nimport useNotes from '../../hooks/useNotes';\nimport NoteModal from '../notes/NoteModal';\nimport FolderModal from '../modals/FolderModal';\nimport NotebookModal from '../modals/NotebookModal';\nimport FolderView from '../views/FolderView';\nimport NotebookView from '../views/NotebookView';\nimport NoteListView from '../views/NoteListView';\nimport NotebookListView from '../views/NotebookListView';\nimport FolderListView from '../views/FolderListView';\nimport { useNotification } from '../../contexts/NotificationContext';\n\nconst LibraryTab = ({ tabColor = '#3B82F6', navigationParams = {} }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState('grid');\n  const [isCreateNoteModalOpen, setIsCreateNoteModalOpen] = useState(false);\n  const [isFolderModalOpen, setIsFolderModalOpen] = useState(false);\n  const [isNotebookModalOpen, setIsNotebookModalOpen] = useState(false);\n  const [editingFolder, setEditingFolder] = useState(null);\n  const [editingNotebook, setEditingNotebook] = useState(null);\n  const [editingNote, setEditingNote] = useState(null);\n  const [currentView, setCurrentView] = useState('library');\n  const [selectedFolder, setSelectedFolder] = useState(null);\n  const [selectedNotebook, setSelectedNotebook] = useState(null);\n  const [defaultFolderId, setDefaultFolderId] = useState(null);  // ✅ Add this line\n  const [defaultNotebookId, setDefaultNotebookId] = useState(null);  // ✅ Add this line too for consistency\n  \n  // Use the hooks\n  const { folders, loading: foldersLoading, createFolder, updateFolder, deleteFolder } = useFolders();\n  const { notebooks, loading: notebooksLoading, createNotebook, updateNotebook, deleteNotebook } = useNotebooks();\n  const { notes, loading: notesLoading, createNote, updateNote, deleteNote } = useNotes();\n  const { showNotification } = useNotification();\n\n  const loading = foldersLoading || notebooksLoading || notesLoading;\n\n  // Convert hex to RGB for dynamic styling\n  const hexToRgb = (hex) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? \n      `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` :\n      '59, 130, 246'; // fallback for #3B82F6\n  };\n\n  const tabColorRgb = hexToRgb(tabColor);\n\n  // All handlers remain the same...\n  const handleDeleteNote = async (noteId) => {\n    if (window.confirm('Are you sure you want to delete this log entry? This action cannot be undone.')) {\n      try {\n        await deleteNote(noteId);\n        showNotification('Log entry deleted successfully!', 'success');\n      } catch (error) {\n        console.error('Failed to delete note:', error);\n        showNotification('Failed to delete log entry. Please try again.', 'error');\n      }\n    }\n  };\n\n  const handleDeleteNotebook = async (notebookId) => {\n    if (window.confirm('Are you sure you want to delete this collection? All associated notes will become unorganized.')) {\n      try {\n        console.log('Deleting notebook with ID:', notebookId);\n        await deleteNotebook(notebookId);\n        showNotification('Collection deleted successfully!', 'success');\n      } catch (error) {\n        console.error('Failed to delete notebook:', error);\n        console.error('Error details:', error.message);\n        showNotification('Failed to delete collection. Please try again.', 'error');\n      }\n    }\n  };\n\n  const handleDeleteFolder = async (folderId) => {\n    if (window.confirm('Are you sure you want to delete this archive? All associated notes and collections will become unorganized.')) {\n      try {\n        await deleteFolder(folderId);\n        showNotification('Archive deleted successfully!', 'success');\n      } catch (error) {\n        console.error('Failed to delete folder:', error);\n        showNotification('Failed to delete archive. Please try again.', 'error');\n      }\n    }\n  };\n\n  // All other handlers remain the same...\n  const handleCreateFolder = async () => {\n    try {\n      const folderData = {\n        name: `New Archive ${folders.length + 1}`,\n        description: 'A new archive for organizing your intel',\n        colorCode: '#FFD700',\n        parentFolderId: null\n      };\n      await createFolder(folderData);\n    } catch (error) {\n      console.error('Failed to initialize archive:', error);\n    }\n  };\n\n  const handleCreateNotebook = async () => {\n    try {\n      const notebookData = {\n        name: `New Collection ${notebooks.length + 1}`,\n        description: 'A new log collection for your intel',\n        colorCode: '#87CEEB'\n      };\n      await createNotebook(notebookData);\n    } catch (error) {\n      console.error('Failed to deploy collection:', error);\n    }\n  };\n\n  const handleCreateNote = () => {\n    setIsCreateNoteModalOpen(true);\n  };\n\n  const handleEditNote = (note) => {\n    setEditingNote(note);\n    setIsCreateNoteModalOpen(true);\n  };\n\n  const handleCreateNoteSubmit = async (noteData) => {\n    try {\n      console.log('Archiving log entry:', { editingNote, noteData });\n      \n      if (editingNote) {\n        console.log('Updating log entry with ID:', editingNote.id);\n        await updateNote(editingNote.id, noteData);\n        console.log('Log entry updated successfully');\n      } else {\n        console.log('Creating new log entry');\n        await createNote(noteData);\n        console.log('Log entry archived successfully');\n      }\n      \n      setEditingNote(null);\n      setIsCreateNoteModalOpen(false);\n      \n    } catch (error) {\n      console.error('Failed to archive log entry:', error);\n      alert('Failed to archive log entry. Please try again.');\n    }\n  };\n\n  const handleEditFolder = (folder) => {\n    setEditingFolder(folder);\n    setIsFolderModalOpen(true);\n  };\n\n  const handleOpenFolder = (folder) => {\n    setSelectedFolder(folder);\n    setCurrentView('folder');\n  };\n\n  const handleOpenNotebook = (notebook) => {\n    setSelectedNotebook(notebook);\n    setCurrentView('notebook');\n  };\n\n  const handleBackToLibrary = () => {\n    // Clear all states when going back\n    setCurrentView('library');\n    setSelectedFolder(null);\n    setSelectedNotebook(null);\n    setEditingNote(null);\n    setEditingNotebook(null);\n    setEditingFolder(null);\n    setIsCreateNoteModalOpen(false);\n    setIsNotebookModalOpen(false);\n    setIsFolderModalOpen(false);\n  };\n\n  const handleViewAllNotes = () => {\n    setCurrentView('allNotes');\n  };\n\n  const handleEditNoteFromList = (note) => {\n    setEditingNote(note);\n    setIsCreateNoteModalOpen(true);\n    setCurrentView('library');\n  };\n\n  const handleViewAllNotebooks = () => {\n    setCurrentView('allNotebooks');\n  };\n\n  const handleViewAllFolders = () => {\n    setCurrentView('allFolders');\n  };\n\n  const handleFolderSave = async (idOrData, folderData = null) => {\n    try {\n      if (editingFolder && folderData) {\n        await updateFolder(idOrData, folderData);\n      } else {\n        await createFolder(idOrData);\n      }\n      setEditingFolder(null);\n    } catch (error) {\n      console.error('Failed to save archive:', error);\n    }\n  };\n\n  const handleEditNotebook = (notebook) => {\n    setEditingNotebook(notebook);\n    setIsNotebookModalOpen(true);\n  };\n\n  const handleNotebookSave = async (idOrData, notebookData = null) => {\n    try {\n      console.log('handleNotebookSave called with:', { idOrData, notebookData, editingNotebook });\n      \n      if (editingNotebook && notebookData) {\n        console.log('Updating notebook with folderId:', notebookData.folderId);\n        await updateNotebook(idOrData, notebookData);\n      } else {\n        console.log('Creating notebook with folderId:', idOrData.folderId);\n        await createNotebook(idOrData);\n      }\n      setEditingNotebook(null);\n      setIsNotebookModalOpen(false);\n    } catch (error) {\n      console.error('Failed to save collection:', error);\n      console.error('Error details:', error.response?.data || error.message);\n    }\n  };\n\n  // Helper functions to calculate counts\n  const getNotebookNoteCount = (notebookId) => {\n    return notes.filter(note => note.notebookId === notebookId).length;\n  };\n\n  const getFolderItemCount = (folderId) => {\n    const folderNotes = notes.filter(note => note.folderId === folderId);\n    const folderNotebooks = notebooks.filter(notebook => notebook.folderId === folderId);\n    return folderNotes.length + folderNotebooks.length;\n  };\n\n  useEffect(() => {\n    if (navigationParams?.view === 'allNotes') {\n      setCurrentView('allNotes');\n    } else if (navigationParams?.view === 'folder' && navigationParams?.selectedFolder) {\n      setCurrentView('folder');\n      setSelectedFolder(navigationParams.selectedFolder);\n    }\n  }, [navigationParams]);\n\n  if (loading) {\n    return (\n      <div className=\"library-tab-container p-6\">\n        <div className=\"text-center py-8 font-mono text-white\">\n          <motion.div\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n            className=\"inline-block mb-4\"\n          >\n            <Archive size={32} style={{ color: tabColor }} />\n          </motion.div>\n          <div>Accessing intelligence archives...</div>\n        </div>\n      </div>\n    );\n  }\n\n  // View routing remains the same but with updated colors...\n  if (currentView === 'folder' && selectedFolder) {\n    // Get notebooks in this folder\n    const folderNotebooks = notebooks.filter(notebook => notebook.folderId === selectedFolder.id);\n    const notebookIds = folderNotebooks.map(nb => nb.id);\n    \n    // Get notes that are either:\n    // 1. Directly assigned to this folder (folderId matches)\n    // 2. Belong to notebooks within this folder (notebookId matches)\n    const folderNotes = notes.filter(note => \n      note.folderId === selectedFolder.id || \n      (note.notebookId && notebookIds.includes(note.notebookId))\n    );\n    \n    return (\n      <div className=\"library-tab-container p-6\">\n        <FolderView \n          folder={selectedFolder}\n          onBack={handleBackToLibrary}\n          onCreateNote={() => {\n            setEditingNote(null);\n            setDefaultFolderId(selectedFolder.id);  // Set default folder\n            setIsCreateNoteModalOpen(true);\n          }}\n          onEditNote={handleEditNote}\n          onDeleteNote={handleDeleteNote}\n          onDeleteNotebook={handleDeleteNotebook}\n          onOpenNotebook={handleOpenNotebook}\n          onCreateNotebook={() => {\n            setEditingNotebook(null);\n            setDefaultFolderId(selectedFolder.id);  // Set default folder\n            setIsNotebookModalOpen(true);\n          }}\n          onEditNotebook={handleEditNotebook}\n          folders={folders}\n          notebooks={folderNotebooks}\n          notes={folderNotes}\n        />\n      </div>\n    );\n  }\n\n  if (currentView === 'notebook' && selectedNotebook) {\n    return (\n      <div className=\"library-tab-container p-6\">\n        <NotebookView\n          notebook={selectedNotebook}\n          onBack={handleBackToLibrary}\n          onCreateNote={handleCreateNoteSubmit}\n          onEditNote={handleCreateNoteSubmit}\n          onDeleteNotebook={handleDeleteNotebook}\n          folders={folders}\n          notebooks={notebooks}\n          notes={notes}\n        />\n      </div>\n    );\n  }\n\n  if (currentView === 'allNotes') {\n    return (\n      <>\n        <NoteListView \n          notes={notes}\n          onBack={() => setCurrentView('library')}\n          onCreateNote={() => {\n            setEditingNote(null);\n            setIsCreateNoteModalOpen(true);\n          }}\n          onEditNote={handleEditNoteFromList}\n          folders={folders}\n          notebooks={notebooks}\n        />\n        \n        <NoteModal\n          isOpen={isCreateNoteModalOpen}\n          onClose={() => {\n            setIsCreateNoteModalOpen(false);\n            setEditingNote(null);\n            setDefaultFolderId(null);  // ✅ Reset on close\n            setDefaultNotebookId(null);  // ✅ Reset on close\n          }}\n          onSave={handleCreateNoteSubmit}\n          onDelete={handleDeleteNote}\n          folders={folders}\n          notebooks={notebooks}\n          existingNote={editingNote}\n          defaultFolderId={defaultFolderId}  // ✅ Pass the default folder\n          defaultNotebookId={defaultNotebookId}  // ✅ Pass the default notebook\n        />\n      </>\n    );\n  }\n\n  if (currentView === 'allNotebooks') {\n    return (\n      <>\n        <NotebookListView \n          notebooks={notebooks}\n          onBack={() => setCurrentView('library')}\n          onCreateNotebook={() => {\n            setEditingNotebook(null);\n            setIsNotebookModalOpen(true);\n          }}\n          onEditNotebook={handleEditNotebook}\n          onDeleteNotebook={handleDeleteNotebook}\n          onOpenNotebook={handleOpenNotebook}\n          folders={folders}\n        />\n        \n        <NotebookModal\n          isOpen={isNotebookModalOpen}\n          onClose={() => {\n            setIsNotebookModalOpen(false);\n            setEditingNotebook(null);\n            setDefaultFolderId(null);  // ✅ Reset on close\n          }}\n          onSave={handleNotebookSave}\n          existingNotebook={editingNotebook}\n          folders={folders}\n          defaultFolderId={defaultFolderId}  // ✅ Pass the default folder\n        />\n      </>\n    );\n  }\n\n  if (currentView === 'allFolders') {\n    return (\n      <div className=\"library-tab-container\">\n        <FolderListView\n          folders={folders}\n          onBack={handleBackToLibrary}\n          onCreateFolder={() => setIsFolderModalOpen(true)}\n          onEditFolder={handleEditFolder}\n          onOpenFolder={handleOpenFolder}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"library-tab-container p-6\">\n      {/* Storage Vault - Simplified */}\n      <div className=\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-4 mb-6 relative\"\n           style={{\n             backgroundColor: 'rgba(0, 0, 0, 0.4)'\n           }}>\n        <div className=\"relative z-10\">\n          {/* Title Row */}\n          <div className=\"flex items-center justify-between mb-4\">\n            <div>\n              <h1 className=\"font-mono font-bold text-white text-3xl\">STORAGE VAULT</h1>\n              <p className=\"font-mono text-xs text-gray-400\">Storage for logs, collections, and archives</p>\n            </div>\n            <div className=\"flex items-center gap-4 text-xs font-mono text-gray-400\">\n              <span><span className=\"text-white font-bold\">{folders.length}</span> ARCHIVES</span>\n              <span><span className=\"text-white font-bold\">{notebooks.length}</span> COLLECTIONS</span>\n              <span><span className=\"text-white font-bold\">{notes.length}</span> LOGS</span>\n            </div>\n          </div>\n\n          {/* Controls Row */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-3\">\n            <button\n              onClick={() => setIsCreateNoteModalOpen(true)}\n              className=\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\"\n            >\n              <FileText size={14} />\n              <span>NEW LOG</span>\n            </button>\n\n            <button\n              onClick={() => setIsNotebookModalOpen(true)}\n              className=\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\"\n            >\n              <BookOpen size={14} />\n              <span>NEW COLLECTION</span>\n            </button>\n\n            <button\n              onClick={() => setIsFolderModalOpen(true)}\n              className=\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\"\n            >\n              <Folder size={14} />\n              <span>NEW ARCHIVE</span>\n            </button>\n\n            <button\n              onClick={async () => {\n                try {\n                  console.log('Exporting all intelligence from Archive Terminal');\n                  \n                  const response = await fetch(`/api/notes/export/all?username=user`);\n                  \n                  if (response.ok) {\n                    const blob = await response.blob();\n                    const url = window.URL.createObjectURL(blob);\n                    const a = document.createElement('a');\n                    a.href = url;\n                    a.download = `intelligence_export_${new Date().toISOString().slice(0, 10)}.md`;\n                    document.body.appendChild(a);\n                    a.click();\n                    window.URL.revokeObjectURL(url);\n                    document.body.removeChild(a);\n                    \n                    showNotification('Intelligence data exported successfully! Check your Downloads folder.', 'success');\n                  } else {\n                    throw new Error('Export failed');\n                  }\n                } catch (error) {\n                  console.error('Export error:', error);\n                  showNotification('Export failed. Please try again later.', 'error');\n                }\n              }}\n              className=\"bg-black border border-white px-3 py-2 font-mono font-bold text-white hover:scale-105 transition-transform flex items-center justify-center gap-2 text-xs\"\n            >\n              <Download size={14} />\n              <span>EXPORT ALL</span>\n            </button>\n\n            <div className=\"relative\">\n              <Search size={14} className=\"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n              <input\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search...\"\n                className=\"w-full pl-8 pr-3 py-2 bg-black border border-gray-600 text-white font-mono text-xs focus:border-white transition-colors\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Content Sections remain the same */}\n      <div className=\"space-y-8\">\n        {/* Archive Systems Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\"\n          style={{\n            backgroundColor: 'rgba(0, 0, 0, 0.4)'\n          }}\n        >\n          <div className=\"relative z-10\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"text-xl font-mono font-bold text-white flex items-center\">\n                  ARCHIVES ({folders.length})\n                </h3>\n                <p className=\"text-sm font-mono text-gray-400\">\n                  Archive systems for organizing multiple collections and logs.\n                </p>\n              </div>\n              <button\n                onClick={handleViewAllFolders}\n                className=\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Eye size={16} />\n                  <span>VIEW ALL</span>\n                </div>\n              </button>\n            </div>\n            \n            {folders.length > 0 ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                {folders.slice(0, 4).map(folder => {\n                  const folderColor = folder.colorCode || '#FFD700';\n                  const rgbColor = folderColor.startsWith('#') \n                    ? `${parseInt(folderColor.slice(1, 3), 16)}, ${parseInt(folderColor.slice(3, 5), 16)}, ${parseInt(folderColor.slice(5, 7), 16)}`\n                    : '251, 191, 36';\n                \n                  const itemCount = getFolderItemCount(folder.id);\n                \n                  return (\n                    <motion.div\n                      key={folder.id}\n                      className=\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\"\n                      style={{\n                        borderColor: folderColor,\n                        boxShadow: `0 0 10px rgba(${rgbColor}, 0.4), 2px 2px 0px 0px rgba(0,0,0,1)`,\n                      }}\n                      whileHover={{ \n                        scale: 1.02, \n                        y: -2,\n                        boxShadow: `0 0 20px rgba(${rgbColor}, 0.6), 2px 2px 0px 0px rgba(0,0,0,1)`\n                      }}\n                      whileTap={{ scale: 0.98 }}\n                      onClick={() => handleOpenFolder(folder)}\n                    >\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <Folder size={24} style={{ color: folderColor }} />\n                        <div className=\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\">\n                          {itemCount} ITEMS\n                        </div>\n                      </div>\n                      <h4 className=\"font-mono font-bold text-white mb-2 truncate\">{folder.name}</h4>\n                      <p className=\"text-xs text-gray-400 mb-3\">{folder.description || 'Access archive contents'}</p>\n                    \n                      <div className=\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleEditFolder(folder);\n                          }}\n                          className=\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\"\n                          style={{ color: tabColor }}\n                          title=\"Modify archive\"\n                        >\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\" />\n                            <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                          </svg>\n                        </button>\n                      \n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteFolder(folder.id);\n                          }}\n                          className=\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\"\n                          title=\"Delete archive\"\n                        >\n                          <Trash2 size={14} />\n                        </button>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"bg-gray-900 border border-gray-600 p-6 text-center\">\n                <Folder size={48} className=\"text-gray-500 mx-auto mb-3\" />\n                <p className=\"text-gray-400 font-mono\">No archive systems found. Initialize first archive storage.</p>\n              </div>\n            )}\n          </div>\n        </motion.div>\n\n        {/* Log Collections Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\"\n          style={{\n            backgroundColor: 'rgba(0, 0, 0, 0.4)'\n          }}\n        >\n          <div className=\"relative z-10\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"text-xl font-mono font-bold text-white flex items-center\">\n                  COLLECTIONS ({notebooks.length})\n                </h3>\n                <p className=\"text-sm font-mono text-gray-400\">\n                  Organized collections for grouping logs by subject, project or types.\n                </p>\n              </div>\n              <button\n                onClick={handleViewAllNotebooks}\n                className=\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Eye size={16} />\n                  <span>VIEW ALL</span>\n                </div>\n              </button>\n            </div>\n            \n            {notebooks.length > 0 ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                {notebooks.slice(0, 4).map(notebook => {\n                  const notebookColor = notebook.colorCode || '#60A5FA';\n                  const rgbColor = notebookColor.startsWith('#') \n                    ? `${parseInt(notebookColor.slice(1, 3), 16)}, ${parseInt(notebookColor.slice(3, 5), 16)}, ${parseInt(notebookColor.slice(5, 7), 16)}`\n                    : '96, 165, 250';\n                \n                  const noteCount = getNotebookNoteCount(notebook.id);\n                \n                  return (\n                    <motion.div\n                      key={notebook.id}\n                      className=\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\"\n                      style={{\n                        borderColor: notebookColor,\n                        boxShadow: `0 0 10px rgba(${rgbColor}, 0.4), 2px 2px 0px 0px rgba(0,0,0,1)`,\n                      }}\n                      whileHover={{ \n                        scale: 1.02, \n                        y: -2,\n                        boxShadow: `0 0 20px rgba(${rgbColor}, 0.6), 2px 2px 0px 0px rgba(0,0,0,1)`\n                      }}\n                      whileTap={{ scale: 0.98 }}\n                      onClick={() => handleOpenNotebook(notebook)}\n                    >\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <BookOpen size={24} style={{ color: notebookColor }} />\n                        <div className=\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\">\n                          {noteCount} LOGS\n                        </div>\n                      </div>\n                      <h4 className=\"font-mono font-bold text-white mb-2 truncate\">{notebook.name}</h4>\n                      <p className=\"text-xs text-gray-400 mb-3\">{notebook.description || 'Access collection database'}</p>\n                    \n                      <div className=\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleEditNotebook(notebook);\n                          }}\n                          className=\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\"\n                          style={{ color: tabColor }}\n                          title=\"Edit collection\"\n                        >\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\" />\n                            <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                          </svg>\n                        </button>\n                      \n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteNotebook(notebook.id);\n                          }}\n                          className=\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\"\n                          title=\"Delete collection\"\n                        >\n                          <Trash2 size={14} />\n                        </button>\n                      </div>\n                    </motion.div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"bg-gray-900 border border-gray-600 p-6 text-center\">\n                <BookOpen size={48} className=\"text-gray-500 mx-auto mb-3\" />\n                <p className=\"text-gray-400 font-mono\">No log collections found. Deploy first collection to begin.</p>\n              </div>\n            )}\n          </div>\n        </motion.div>\n\n        {/* Player Logs Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"border-2 border-white shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 relative\"\n          style={{\n            backgroundColor: 'rgba(0, 0, 0, 0.4)'\n          }}\n        >\n          <div className=\"relative z-10\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"text-xl font-mono font-bold text-white flex items-center\">\n                  LOG ENTRIES ({notes.length})\n                </h3>\n                <p className=\"text-sm font-mono text-gray-400\">\n                  Individual log entries for storing notes, thoughts and ideas.\n                </p>\n              </div>\n              <button\n                onClick={handleViewAllNotes}\n                className=\"bg-black border-2 border-white px-4 py-2 relative group cursor-pointer transition-all duration-300 font-mono font-bold overflow-hidden text-white hover:scale-105\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <Eye size={16} />\n                  <span>VIEW ALL</span>\n                </div>\n              </button>\n            </div>\n            \n            {notes.length > 0 ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                {notes\n                  .slice()\n                  .sort((a, b) => new Date(b.createdAt || b.updatedAt || 0) - new Date(a.createdAt || a.updatedAt || 0))\n                  .slice(0, 4)\n                  .map((note, index) => {\n                    const noteColor = note.color || '#4ADE80';\n                    const rgbColor = hexToRgb(noteColor);\n                    const tagsArray = Array.isArray(note.tags) ? note.tags : (note.tags ? note.tags.split(',').map(tag => tag.trim()) : []);\n\n                    return (\n                      <motion.div\n                        key={note.id}\n                        className=\"bg-gray-900 border-2 p-4 cursor-pointer group relative transition-all duration-300\"\n                        style={{\n                          borderColor: noteColor,\n                          boxShadow: `0 0 10px rgba(${rgbColor}, 0.4), 2px 2px 0px 0px rgba(0,0,0,1)`,\n                        }}\n                        whileHover={{ \n                          scale: 1.02, \n                          y: -2,\n                          boxShadow: `0 0 20px rgba(${rgbColor}, 0.6), 2px 2px 0px 0px rgba(0,0,0,1)`\n                        }}\n                        whileTap={{ scale: 0.98 }}\n                        onClick={() => handleEditNote(note)}\n                      >\n                        <div className=\"flex items-start justify-between mb-3\">\n                          <FileText size={24} style={{ color: noteColor }} />\n                          <div className=\"text-xs font-mono text-gray-400 bg-gray-700 px-2 py-1 border border-gray-600\">\n                            {tagsArray.length} TAGS\n                          </div>\n                        </div>\n                        <h4 className=\"font-mono font-bold text-white mb-2 truncate\" title={note.title}>\n                          {note.title}\n                        </h4>\n                        <p className=\"text-xs text-gray-400 mb-3\">\n                          {note.content && note.content.length > 100 \n                            ? `${note.content.substring(0, 100)}...` \n                            : note.content}\n                        </p>\n                      \n                        {tagsArray.length > 0 && (\n                          <div className=\"flex flex-wrap gap-1 mb-2\">\n                            {tagsArray.slice(0, 2).map((tag, tagIndex) => (\n                              <span\n                                key={tagIndex}\n                                className=\"px-2 py-1 bg-gray-700 border border-gray-600 text-xs font-mono\"\n                                style={{ color: tabColor }}\n                              >\n                                {tag}\n                              </span>\n                            ))}\n                            {tagsArray.length > 2 && (\n                              <span className=\"text-xs text-gray-500 font-mono px-2 py-1\">\n                                +{tagsArray.length - 2}\n                              </span>\n                            )}\n                          </div>\n                        )}\n                      \n                        <div className=\"text-xs text-gray-400 mb-2\">\n                          {new Date(note.createdAt || note.updatedAt).toLocaleDateString()}\n                        </div>\n\n                        <div className=\"absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleEditNote(note);\n                            }}\n                            className=\"p-1.5 bg-gray-700 hover:bg-gray-600 rounded transition-colors\"\n                            style={{ color: tabColor }}\n                            title=\"Edit log entry\"\n                          >\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2-2v-7\" />\n                              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                            </svg>\n                          </button>\n\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDeleteNote(note.id);\n                            }}\n                            className=\"p-1.5 bg-gray-700 hover:bg-red-600 rounded text-gray-400 hover:text-red-400 transition-colors\"\n                            title=\"Delete log entry\"\n                          >\n                            <Trash2 size={14} />\n                          </button>\n                        </div>\n                      </motion.div>\n                    );\n                  })}\n              </div>\n            ) : (\n              <div className=\"bg-gray-900 border border-gray-600 p-6 text-center\">\n                <FileText size={48} className=\"text-gray-500 mx-auto mb-3\" />\n                <p className=\"text-gray-400 font-mono\">No log entries found. Initialize first player log to begin.</p>\n              </div>\n            )}\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Modals */}\n      <NoteModal\n        isOpen={isCreateNoteModalOpen}\n        onClose={() => {\n          setIsCreateNoteModalOpen(false);\n          setEditingNote(null);\n          setDefaultFolderId(null);  // ✅ Reset on close\n          setDefaultNotebookId(null);  // ✅ Reset on close\n        }}\n        onSave={handleCreateNoteSubmit}\n        onDelete={handleDeleteNote}\n        folders={folders}\n        notebooks={notebooks}\n        existingNote={editingNote}\n        defaultFolderId={defaultFolderId}  // ✅ Pass the default folder\n        defaultNotebookId={defaultNotebookId}  // ✅ Pass the default notebook\n      />\n\n      <FolderModal\n        isOpen={isFolderModalOpen}\n        onClose={() => {\n          setIsFolderModalOpen(false);\n          setEditingFolder(null);\n        }}\n        onSave={handleFolderSave}\n        existingFolder={editingFolder}\n      />\n\n      <NotebookModal\n        isOpen={isNotebookModalOpen}\n        onClose={() => {\n          setIsNotebookModalOpen(false);\n          setEditingNotebook(null);\n          setDefaultFolderId(null);  // ✅ Reset on close\n        }}\n        onSave={handleNotebookSave}\n        existingNotebook={editingNotebook}\n        folders={folders}\n        defaultFolderId={defaultFolderId}  // ✅ Pass the default folder\n      />\n    </div>\n\n  );\n};\n\nexport default LibraryTab;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
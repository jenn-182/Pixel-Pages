{"ast":null,"code":"import apiService from './api';\nclass BackendAchievementService {\n  constructor() {\n    this.allAchievements = [];\n    this.playerAchievements = [];\n    this.playerStats = {};\n    this.loaded = false;\n  }\n  async loadData(username = 'user') {\n    // Changed from 'testuser' to 'Jroc_182'\n    try {\n      const [achievements, playerAchievements, stats] = await Promise.all([apiService.getAllAchievements(), apiService.getPlayerAchievements(username), apiService.getAchievementPlayerStats(username)]);\n\n      // DEBUG: Log the actual data structure with more detail\n      console.log('🔍 DEBUG - Raw backend data for', username + ':');\n      console.log('First 2 achievements:', achievements.slice(0, 2));\n      console.log('First 5 player achievements:', playerAchievements.slice(0, 5));\n\n      // Show specific fields we're looking for\n      if (playerAchievements.length > 0) {\n        const firstPlayerAch = playerAchievements[0];\n        console.log('🔍 PlayerAchievement fields:', Object.keys(firstPlayerAch));\n        console.log('🔍 Sample PlayerAchievement:', firstPlayerAch);\n      }\n      this.allAchievements = achievements;\n      this.playerAchievements = playerAchievements;\n      this.playerStats = stats;\n      this.loaded = true;\n      console.log('✅ Backend achievement data loaded for', username + ':', {\n        achievements: achievements.length,\n        playerProgress: playerAchievements.length,\n        stats\n      });\n\n      // Debugging completed achievements\n      console.log('🔍 Completed achievements:', playerAchievements.filter(pa => pa.completed === true));\n      console.log('🔍 Sample completed achievement:', playerAchievements.find(pa => pa.completed === true));\n      return {\n        achievements,\n        playerAchievements,\n        stats\n      };\n    } catch (error) {\n      console.error('❌ Failed to load backend achievements:', error);\n      throw error;\n    }\n  }\n  isUnlocked(achievementId) {\n    const playerAchievement = this.playerAchievements.find(pa => pa.id === achievementId // Use 'id' not 'achievementId'\n    );\n    return (playerAchievement === null || playerAchievement === void 0 ? void 0 : playerAchievement.completed) === true; // Explicit boolean check\n  }\n  getAchievementProgress(achievementId, userStats) {\n    const playerAchievement = this.playerAchievements.find(pa => pa.id === achievementId);\n    if (playerAchievement !== null && playerAchievement !== void 0 && playerAchievement.completed) {\n      return 1; // Return 1 (100%) for completed achievements\n    }\n\n    // For in-progress achievements, use the progress field\n    const progressValue = (playerAchievement === null || playerAchievement === void 0 ? void 0 : playerAchievement.progress) || 0;\n    const maxProgress = (playerAchievement === null || playerAchievement === void 0 ? void 0 : playerAchievement.maxProgress) || 100;\n    return progressValue / maxProgress; // Convert to decimal\n  }\n  getUnlockedAchievements() {\n    return this.playerAchievements.filter(pa => pa.completed) // These are already the full achievement objects\n    .map(playerAch => ({\n      ...playerAch,\n      unlockedAt: playerAch.unlockedAt\n    }));\n  }\n  getLockedAchievements() {\n    return this.allAchievements.filter(a => !this.isUnlocked(a.id));\n  }\n  getInProgressAchievements() {\n    return this.playerAchievements.filter(achievement => {\n      return !achievement.completed && (achievement.progress || 0) > 0 && (achievement.progress || 0) < (achievement.maxProgress || 100);\n    }).map(playerAch => ({\n      ...playerAch,\n      progress: playerAch.progress || 0,\n      currentProgress: playerAch.progress || 0,\n      targetProgress: playerAch.maxProgress || 100,\n      // ✅ Changed from targetValue\n      progressPercentage: playerAch.progressPercentage || 0\n    }));\n  }\n  getStats() {\n    const unlocked = this.getUnlockedAchievements();\n    const total = this.allAchievements.length;\n    return {\n      total,\n      unlocked: unlocked.length,\n      percentage: total > 0 ? Math.round(unlocked.length / total * 100) : 0,\n      totalXP: this.playerStats.totalXp || 0,\n      byTier: {\n        common: unlocked.filter(a => a.tier === 'common').length,\n        uncommon: unlocked.filter(a => a.tier === 'uncommon').length,\n        rare: unlocked.filter(a => a.tier === 'rare').length,\n        legendary: unlocked.filter(a => a.tier === 'legendary').length\n      }\n    };\n  }\n}\nexport default new BackendAchievementService();","map":{"version":3,"names":["apiService","BackendAchievementService","constructor","allAchievements","playerAchievements","playerStats","loaded","loadData","username","achievements","stats","Promise","all","getAllAchievements","getPlayerAchievements","getAchievementPlayerStats","console","log","slice","length","firstPlayerAch","Object","keys","playerProgress","filter","pa","completed","find","error","isUnlocked","achievementId","playerAchievement","id","getAchievementProgress","userStats","progressValue","progress","maxProgress","getUnlockedAchievements","map","playerAch","unlockedAt","getLockedAchievements","a","getInProgressAchievements","achievement","currentProgress","targetProgress","progressPercentage","getStats","unlocked","total","percentage","Math","round","totalXP","totalXp","byTier","common","tier","uncommon","rare","legendary"],"sources":["/Users/jenn/Projects/Pixel-Pages/frontend/src/services/backendAchievementService.js"],"sourcesContent":["import apiService from './api';\n\nclass BackendAchievementService {\n  constructor() {\n    this.allAchievements = [];\n    this.playerAchievements = [];\n    this.playerStats = {};\n    this.loaded = false;\n  }\n\n  async loadData(username = 'user') {  // Changed from 'testuser' to 'Jroc_182'\n    try {\n      const [achievements, playerAchievements, stats] = await Promise.all([\n        apiService.getAllAchievements(),\n        apiService.getPlayerAchievements(username),\n        apiService.getAchievementPlayerStats(username)\n      ]);\n\n      // DEBUG: Log the actual data structure with more detail\n      console.log('🔍 DEBUG - Raw backend data for', username + ':');\n      console.log('First 2 achievements:', achievements.slice(0, 2));\n      console.log('First 5 player achievements:', playerAchievements.slice(0, 5));\n\n      // Show specific fields we're looking for\n      if (playerAchievements.length > 0) {\n        const firstPlayerAch = playerAchievements[0];\n        console.log('🔍 PlayerAchievement fields:', Object.keys(firstPlayerAch));\n        console.log('🔍 Sample PlayerAchievement:', firstPlayerAch);\n      }\n\n      this.allAchievements = achievements;\n      this.playerAchievements = playerAchievements;\n      this.playerStats = stats;\n      this.loaded = true;\n\n      console.log('✅ Backend achievement data loaded for', username + ':', {\n        achievements: achievements.length,\n        playerProgress: playerAchievements.length,\n        stats\n      });\n\n      // Debugging completed achievements\n      console.log('🔍 Completed achievements:', \n        playerAchievements.filter(pa => pa.completed === true)\n      );\n      console.log('🔍 Sample completed achievement:', \n        playerAchievements.find(pa => pa.completed === true)\n      );\n\n      return { achievements, playerAchievements, stats };\n    } catch (error) {\n      console.error('❌ Failed to load backend achievements:', error);\n      throw error;\n    }\n  }\n\n  isUnlocked(achievementId) {\n    const playerAchievement = this.playerAchievements.find(pa => \n      pa.id === achievementId  // Use 'id' not 'achievementId'\n    );\n    return playerAchievement?.completed === true; // Explicit boolean check\n  }\n\n  getAchievementProgress(achievementId, userStats) {\n    const playerAchievement = this.playerAchievements.find(pa => pa.id === achievementId);\n    \n    if (playerAchievement?.completed) {\n      return 1; // Return 1 (100%) for completed achievements\n    }\n    \n    // For in-progress achievements, use the progress field\n    const progressValue = playerAchievement?.progress || 0;\n    const maxProgress = playerAchievement?.maxProgress || 100;\n    return progressValue / maxProgress; // Convert to decimal\n  }\n\n  getUnlockedAchievements() {\n    return this.playerAchievements\n      .filter(pa => pa.completed)  // These are already the full achievement objects\n      .map(playerAch => ({\n        ...playerAch,\n        unlockedAt: playerAch.unlockedAt\n      }));\n  }\n\n  getLockedAchievements() {\n    return this.allAchievements.filter(a => !this.isUnlocked(a.id));\n  }\n\n  getInProgressAchievements() {\n    return this.playerAchievements\n      .filter(achievement => {\n        return !achievement.completed && \n               (achievement.progress || 0) > 0 && \n               (achievement.progress || 0) < (achievement.maxProgress || 100);\n      })\n      .map(playerAch => ({\n        ...playerAch,\n        progress: playerAch.progress || 0,\n        currentProgress: playerAch.progress || 0,\n        targetProgress: playerAch.maxProgress || 100,  // ✅ Changed from targetValue\n        progressPercentage: playerAch.progressPercentage || 0\n      }));\n  }\n\n  getStats() {\n    const unlocked = this.getUnlockedAchievements();\n    const total = this.allAchievements.length;\n    \n    return {\n      total,\n      unlocked: unlocked.length,\n      percentage: total > 0 ? Math.round((unlocked.length / total) * 100) : 0,\n      totalXP: this.playerStats.totalXp || 0,\n      byTier: {\n        common: unlocked.filter(a => a.tier === 'common').length,\n        uncommon: unlocked.filter(a => a.tier === 'uncommon').length,\n        rare: unlocked.filter(a => a.tier === 'rare').length,\n        legendary: unlocked.filter(a => a.tier === 'legendary').length\n      }\n    };\n  }\n}\n\nexport default new BackendAchievementService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
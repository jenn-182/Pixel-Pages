{"ast":null,"code":"import _objectSpread from\"/Users/jenn/Projects/Pixel-Pages/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion,AnimatePresence}from'framer-motion';import{X,FileText,Tag,Folder,BookOpen,Palette,Save,Plus,ArrowLeft,Download,FileDown,Archive,Bold,Italic,Underline,List,ListOrdered,Quote,Code,Highlighter,Eye,EyeOff,Trash2}from'lucide-react';import{useNotification}from'../../contexts/NotificationContext';import{insertFormatting,handleFormattingKeyDown}from'../../utils/markdownUtils';import MarkdownPreview from'../markdown/MarkdownPreview';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NoteModal=_ref=>{let{isOpen,onClose,onSave,onDelete,folders,notebooks,existingNote=null,defaultFolderId=null,defaultNotebookId=null,title:customTitle=null}=_ref;const[noteData,setNoteData]=useState({title:'',content:'',tags:'',color:'#4ADE80',folderId:null,notebookId:null});const[showPreview,setShowPreview]=useState(false);const[showDeleteConfirm,setShowDeleteConfirm]=useState(false);const{showNotification}=useNotification();const isEditing=existingNote!==null;const modalTitle=customTitle||(isEditing?'MODIFY LOG ENTRY':'CREATE NEW LOG ENTRY');const colors=['#4ADE80','#60A5FA','#F472B6','#FBBF24','#A78BFA','#FB7185','#34D399','#FCD34D'];// Load existing note data when editing\nuseEffect(()=>{if(existingNote){setNoteData({title:existingNote.title||'',content:existingNote.content||'',tags:Array.isArray(existingNote.tags)?existingNote.tags.join(', '):existingNote.tags||'',color:existingNote.color||'#4ADE80',folderId:existingNote.folderId||null,notebookId:existingNote.notebookId||null});}else{setNoteData({title:'',content:'',tags:'',color:'#4ADE80',folderId:defaultFolderId,notebookId:defaultNotebookId});}},[existingNote,isOpen,defaultFolderId,defaultNotebookId]);// Keyboard shortcuts\nuseEffect(()=>{if(!isOpen)return;const handleKeyDown=e=>{// Escape to close\nif(e.key==='Escape'){e.preventDefault();onClose();}// Ctrl/Cmd + Enter to save\nif((e.ctrlKey||e.metaKey)&&e.key==='Enter'){e.preventDefault();handleSubmit(e);}};document.addEventListener('keydown',handleKeyDown);return()=>document.removeEventListener('keydown',handleKeyDown);},[isOpen,onClose,noteData]);// Helper function to insert formatting (using imported utility)\nconst insertFormattingHandler=function(before){let after=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';let placeholder=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'text';const textarea=document.getElementById('content-textarea');const result=insertFormatting(textarea,noteData.content,before,after,placeholder);setNoteData(_objectSpread(_objectSpread({},noteData),{},{content:result.newContent}));// Restore cursor position\nsetTimeout(()=>{textarea.focus();textarea.setSelectionRange(result.newCursorPosition,result.newCursorPosition);},0);};// Keyboard shortcuts for formatting (using imported utility)\nconst handleKeyDown=e=>{if((e.ctrlKey||e.metaKey)&&e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);return;}const textarea=document.getElementById('content-textarea');handleFormattingKeyDown(e,textarea,noteData.content,newContent=>{setNoteData(_objectSpread(_objectSpread({},noteData),{},{content:newContent}));});};const handleSubmit=async e=>{e.preventDefault();try{console.log('Submitting note data:',noteData);await onSave(noteData);onClose();// Close modal \n}catch(error){console.error('Failed to save note:',error);showNotification('Failed to save note. Please try again.','error');}};// delete handler\nconst handleDelete=async()=>{try{await onDelete(existingNote.id);showNotification(\"\\\"\".concat(existingNote.title,\"\\\" deleted successfully!\"),'success');onClose();}catch(error){console.error('Failed to delete note:',error);showNotification('Failed to delete note. Please try again.','error');}};return/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-gray-900 z-50 flex flex-col\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:\"bg-gray-800 border-b-2 border-cyan-400 p-4 flex items-center justify-between flex-shrink-0\",style:{boxShadow:'0 2px 20px rgba(34,211,238,0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onClose,className:\"bg-gray-900 border-2 border-cyan-400 p-2 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] text-cyan-400\",style:{boxShadow:'0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'},title:\"Back to Library (ESC)\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:20,className:\"text-cyan-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-3\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"font-mono text-2xl font-bold text-white\",children:modalTitle})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs font-mono text-gray-400 hidden sm:flex gap-4\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"ESC: Back\"}),/*#__PURE__*/_jsx(\"span\",{children:\"CTRL+ENTER: Save\"})]}),isEditing&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDeleteConfirm(true),className:\"bg-gray-900 border-2 border-red-500 px-4 py-2 relative group cursor-pointer transition-all duration-300 hover:border-red-400 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] font-mono font-bold text-red-500\",style:{boxShadow:'0 0 5px rgba(239, 68, 68, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'},title:\"Delete Log Entry\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Trash2,{size:16,className:\"text-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"DELETE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-red-500 opacity-0 group-hover:opacity-10 transition-opacity\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",form:\"note-form\",className:\"bg-gray-900 border-2 border-cyan-400 px-6 py-2 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] font-mono font-bold text-cyan-400\",style:{boxShadow:'0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[isEditing?/*#__PURE__*/_jsx(Save,{size:18,className:\"text-cyan-400\"}):/*#__PURE__*/_jsx(Plus,{size:18,className:\"text-cyan-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-400\",children:isEditing?'SAVE CHANGES':'CREATE ENTRY'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden flex flex-col\",children:/*#__PURE__*/_jsx(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.1},className:\"w-full h-full p-3 overflow-hidden flex flex-col\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"note-form\",onSubmit:handleSubmit,className:\"h-full flex flex-col space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"input\",{value:noteData.title,onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{title:e.target.value})),placeholder:\"Enter your log title...\",className:\"w-full text-3xl font-mono font-bold bg-transparent border-none outline-none text-white placeholder-gray-500 p-0\",style:{color:'#ffffff !important',WebkitTextFillColor:'#ffffff',textFillColor:'#ffffff'},required:true,autoFocus:true}),/*#__PURE__*/_jsx(\"div\",{className:\"h-1 bg-gradient-to-r from-cyan-400 to-purple-400 mt-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 grid grid-cols-1 lg:grid-cols-6 gap-3 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-5 flex flex-col overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border-2 border-cyan-400 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] relative flex-1 flex flex-col overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 border-2 border-cyan-400 opacity-20 animate-pulse pointer-events-none\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 border-b-2 border-gray-700 relative z-10 flex-shrink-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{size:18,className:\"text-cyan-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-sm font-bold text-cyan-400\",children:\"LOG CONTENT\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('**','**','bold text'),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Bold (Ctrl+B)\",children:/*#__PURE__*/_jsx(Bold,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('*','*','italic text'),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Italic (Ctrl+I)\",children:/*#__PURE__*/_jsx(Italic,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('<u>','</u>','underlined text'),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Underline (Ctrl+U)\",children:/*#__PURE__*/_jsx(Underline,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('==','==','highlighted text'),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Highlight\",children:/*#__PURE__*/_jsx(Highlighter,{size:14})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-5 bg-gray-600\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('- ','',''),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Bullet List\",children:/*#__PURE__*/_jsx(List,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('1. ','',''),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Numbered List\",children:/*#__PURE__*/_jsx(ListOrdered,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('> ','',''),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Quote\",children:/*#__PURE__*/_jsx(Quote,{size:14})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>insertFormattingHandler('`','`','code'),className:\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\",title:\"Inline Code (Ctrl+`)\",children:/*#__PURE__*/_jsx(Code,{size:14})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-px h-5 bg-gray-600\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPreview(!showPreview),className:\"p-1.5 bg-gray-700 border border-gray-600 transition-colors \".concat(showPreview?'text-cyan-400 border-cyan-400':'text-gray-300 hover:text-cyan-400 hover:border-cyan-400'),title:\"Toggle Preview\",children:showPreview?/*#__PURE__*/_jsx(EyeOff,{size:14}):/*#__PURE__*/_jsx(Eye,{size:14})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex relative z-10 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(showPreview?'w-1/2 border-r-2 border-gray-700':'w-full',\" flex flex-col\"),children:/*#__PURE__*/_jsx(\"textarea\",{id:\"content-textarea\",value:noteData.content,onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{content:e.target.value})),onKeyDown:handleKeyDown,placeholder:\"Start writing your log entry... **Bold text** or *italic text*\\n- Bullet points\\n1. Numbered lists\\n> Quoted text\\n`inline code`\\n==highlighted text== Use the toolbar above or keyboard shortcuts:\\n- Ctrl/Cmd + B: Bold\\n- Ctrl/Cmd + I: Italic  \\n- Ctrl/Cmd + U: Underline\\n- Ctrl/Cmd + `: Code\",className:\"w-full flex-1 bg-transparent border-none outline-none text-white placeholder-gray-400 font-mono text-base resize-none leading-relaxed overflow-y-auto p-4\",style:{color:'#ffffff !important',WebkitTextFillColor:'#ffffff',textFillColor:'#ffffff'},required:true})}),showPreview&&/*#__PURE__*/_jsx(\"div\",{className:\"w-1/2 overflow-y-auto p-4 bg-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-white leading-relaxed text-base\",children:/*#__PURE__*/_jsx(MarkdownPreview,{content:noteData.content||'*Start typing to see preview...*'})})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border-2 border-gray-600 p-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-xs font-mono font-bold text-cyan-400 mb-1\",children:[/*#__PURE__*/_jsx(Tag,{size:12,className:\"inline mr-1\"}),\"TAGS\"]}),/*#__PURE__*/_jsx(\"input\",{value:noteData.tags,onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{tags:e.target.value})),placeholder:\"work, ideas...\",className:\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\",style:{color:'#ffffff !important',WebkitTextFillColor:'#ffffff',textFillColor:'#ffffff'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border-2 border-gray-600 p-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-xs font-mono font-bold text-cyan-400 mb-1\",children:[/*#__PURE__*/_jsx(Palette,{size:12,className:\"inline mr-1\"}),\"COLOR\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-4 border-2 border-gray-600\",style:{backgroundColor:noteData.color},title:\"Current color\"}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:noteData.color,onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{color:e.target.value})),className:\"w-6 h-4 border-2 border-gray-600 bg-transparent cursor-pointer\",title:\"Custom color picker\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-mono text-gray-400\",children:\"Custom\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-1\",children:colors.map(color=>{const hexToRgb=hex=>{const result=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);return result?\"\".concat(parseInt(result[1],16),\", \").concat(parseInt(result[2],16),\", \").concat(parseInt(result[3],16)):'74, 222, 128';};const rgbColor=hexToRgb(color);return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{color})),className:\"w-full h-6 border-2 transition-all duration-300 relative \".concat(noteData.color===color?'border-white scale-105':'border-gray-600 hover:border-gray-400'),style:{backgroundColor:color,boxShadow:noteData.color===color?\"0 0 15px rgba(\".concat(rgbColor,\", 0.6), 2px 2px 0px 0px rgba(0,0,0,1)\"):\"0 0 5px rgba(\".concat(rgbColor,\", 0.3), 1px 1px 0px 0px rgba(0,0,0,1)\")},title:color,children:noteData.color===color&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 border-2 border-white opacity-60\"})},color);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border-2 border-gray-600 p-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-xs font-mono font-bold text-cyan-400 mb-1\",children:[/*#__PURE__*/_jsx(Folder,{size:12,className:\"inline mr-1\"}),\"ARCHIVE\"]}),/*#__PURE__*/_jsxs(\"select\",{value:noteData.folderId||'',onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{folderId:e.target.value?parseInt(e.target.value):null})),className:\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\",style:{color:'#ffffff !important',WebkitTextFillColor:'#ffffff',textFillColor:'#ffffff'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"None\"}),folders.map(folder=>/*#__PURE__*/_jsx(\"option\",{value:folder.id,children:folder.name},folder.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 border-2 border-gray-600 p-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-xs font-mono font-bold text-cyan-400 mb-1\",children:[/*#__PURE__*/_jsx(BookOpen,{size:12,className:\"inline mr-1\"}),\"COLLECTION\"]}),/*#__PURE__*/_jsxs(\"select\",{value:noteData.notebookId||'',onChange:e=>setNoteData(_objectSpread(_objectSpread({},noteData),{},{notebookId:e.target.value?parseInt(e.target.value):null})),className:\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\",style:{color:'#ffffff !important',WebkitTextFillColor:'#ffffff',textFillColor:'#ffffff'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"None\"}),notebooks.map(notebook=>/*#__PURE__*/_jsx(\"option\",{value:notebook.id,children:notebook.name},notebook.id))]})]}),isEditing&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:0.3},className:\"bg-gray-800 border-2 border-gray-600 p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1 mb-1\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-mono text-xs font-bold text-cyan-400\",children:\"EXPORT\"})}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:async()=>{try{const response=await fetch(\"/api/notes/\".concat(existingNote.id,\"/export\"));if(response.ok){const blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(existingNote.title.replace(/[^a-zA-Z0-9\\s]/g,'').replace(/\\s+/g,'_'),\".md\");document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);showNotification(\"\\\"\".concat(existingNote.title,\"\\\" exported successfully!\"),'success');}}catch(error){showNotification('Export failed. Please try again.','error');}},className:\"w-full bg-gray-900 border-2 border-cyan-400 px-2 py-1 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] font-mono font-bold text-cyan-400 text-xs\",style:{boxShadow:'0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-1\",children:[/*#__PURE__*/_jsx(FileDown,{size:10,className:\"text-cyan-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-400\",children:\"EXPORT\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\"})]})]})]})})]})]})})}),showDeleteConfirm&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60\",children:/*#__PURE__*/_jsx(motion.div,{initial:{scale:0.9,opacity:0},animate:{scale:1,opacity:1},className:\"bg-gray-800 border-2 border-red-500 p-6 max-w-md mx-4\",style:{boxShadow:'0 0 20px rgba(239, 68, 68, 0.3), 4px 4px 0px 0px rgba(0,0,0,1)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Trash2,{size:48,className:\"text-red-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-mono text-xl font-bold text-white mb-2\",children:\"DELETE LOG ENTRY\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 font-mono mb-4\",children:[\"Are you sure you want to permanently delete\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-cyan-400 font-bold\",children:[\"\\\"\",existingNote===null||existingNote===void 0?void 0:existingNote.title,\"\\\"\"]}),\"?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 text-sm font-mono mb-6\",children:\"This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 justify-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteConfirm(false),className:\"bg-gray-900 border-2 border-gray-600 px-4 py-2 font-mono font-bold text-gray-300 hover:border-gray-500 transition-colors\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"CANCEL\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"bg-gray-900 border-2 border-red-500 px-4 py-2 font-mono font-bold text-red-500 hover:border-red-400 transition-colors\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"DELETE\"})})]})]})})})]})});};export default NoteModal;","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","X","FileText","Tag","Folder","BookOpen","Palette","Save","Plus","ArrowLeft","Download","FileDown","Archive","Bold","Italic","Underline","List","ListOrdered","Quote","Code","Highlighter","Eye","EyeOff","Trash2","useNotification","insertFormatting","handleFormattingKeyDown","MarkdownPreview","jsx","_jsx","jsxs","_jsxs","NoteModal","_ref","isOpen","onClose","onSave","onDelete","folders","notebooks","existingNote","defaultFolderId","defaultNotebookId","title","customTitle","noteData","setNoteData","content","tags","color","folderId","notebookId","showPreview","setShowPreview","showDeleteConfirm","setShowDeleteConfirm","showNotification","isEditing","modalTitle","colors","Array","isArray","join","handleKeyDown","e","key","preventDefault","ctrlKey","metaKey","handleSubmit","document","addEventListener","removeEventListener","insertFormattingHandler","before","after","arguments","length","undefined","placeholder","textarea","getElementById","result","_objectSpread","newContent","setTimeout","focus","setSelectionRange","newCursorPosition","shiftKey","console","log","error","handleDelete","id","concat","children","div","initial","opacity","animate","exit","className","y","style","boxShadow","onClick","size","type","form","transition","delay","onSubmit","value","onChange","target","WebkitTextFillColor","textFillColor","required","autoFocus","onKeyDown","backgroundColor","map","hexToRgb","hex","exec","parseInt","rgbColor","folder","name","notebook","response","fetch","ok","blob","url","window","URL","createObjectURL","a","createElement","href","download","replace","body","appendChild","click","revokeObjectURL","removeChild","scale"],"sources":["/Users/jenn/Projects/Pixel-Pages/frontend/src/components/notes/NoteModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, FileText, Tag, Folder, BookOpen, Palette, Save, Plus, ArrowLeft, Download, FileDown, Archive, Bold, Italic, Underline, List, ListOrdered, Quote, Code, Highlighter, Eye, EyeOff, Trash2 } from 'lucide-react';\nimport { useNotification } from '../../contexts/NotificationContext';\nimport { insertFormatting, handleFormattingKeyDown } from '../../utils/markdownUtils';\nimport MarkdownPreview from '../markdown/MarkdownPreview';\n\nconst NoteModal = ({ \n  isOpen, \n  onClose, \n  onSave, \n  onDelete, \n  folders, \n  notebooks, \n  existingNote = null,\n  defaultFolderId = null,\n  defaultNotebookId = null,\n  title: customTitle = null\n}) => {\n  const [noteData, setNoteData] = useState({\n    title: '',\n    content: '',\n    tags: '',\n    color: '#4ADE80',\n    folderId: null,\n    notebookId: null\n  });\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false); \n  const { showNotification } = useNotification();\n\n  const isEditing = existingNote !== null;\n  const modalTitle = customTitle || (isEditing ? 'MODIFY LOG ENTRY' : 'CREATE NEW LOG ENTRY');\n\n  const colors = [\n    '#4ADE80', '#60A5FA', '#F472B6', '#FBBF24',\n    '#A78BFA', '#FB7185', '#34D399', '#FCD34D'\n  ];\n\n  // Load existing note data when editing\n  useEffect(() => {\n    if (existingNote) {\n      setNoteData({\n        title: existingNote.title || '',\n        content: existingNote.content || '',\n        tags: Array.isArray(existingNote.tags) ? existingNote.tags.join(', ') : (existingNote.tags || ''),\n        color: existingNote.color || '#4ADE80',\n        folderId: existingNote.folderId || null,\n        notebookId: existingNote.notebookId || null\n      });\n    } else {\n      setNoteData({\n        title: '',\n        content: '',\n        tags: '',\n        color: '#4ADE80',\n        folderId: defaultFolderId,\n        notebookId: defaultNotebookId,\n      });\n    }\n  }, [existingNote, isOpen, defaultFolderId, defaultNotebookId]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleKeyDown = (e) => {\n      // Escape to close\n      if (e.key === 'Escape') {\n        e.preventDefault();\n        onClose();\n      }\n      // Ctrl/Cmd + Enter to save\n      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {\n        e.preventDefault();\n        handleSubmit(e);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose, noteData]);\n\n  // Helper function to insert formatting (using imported utility)\n  const insertFormattingHandler = (before, after = '', placeholder = 'text') => {\n    const textarea = document.getElementById('content-textarea');\n    const result = insertFormatting(textarea, noteData.content, before, after, placeholder);\n    \n    setNoteData({ ...noteData, content: result.newContent });\n    \n    // Restore cursor position\n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(result.newCursorPosition, result.newCursorPosition);\n    }, 0);\n  };\n\n  // Keyboard shortcuts for formatting (using imported utility)\n  const handleKeyDown = (e) => {\n    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n      return;\n    }\n    \n    const textarea = document.getElementById('content-textarea');\n    handleFormattingKeyDown(e, textarea, noteData.content, (newContent) => {\n      setNoteData({ ...noteData, content: newContent });\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      console.log('Submitting note data:', noteData);\n      await onSave(noteData);\n      onClose(); // Close modal \n    } catch (error) {\n      console.error('Failed to save note:', error);\n      showNotification('Failed to save note. Please try again.', 'error');\n    }\n  };\n\n  // delete handler\n  const handleDelete = async () => {\n    try {\n      await onDelete(existingNote.id);\n      showNotification(`\"${existingNote.title}\" deleted successfully!`, 'success');\n      onClose();\n    } catch (error) {\n      console.error('Failed to delete note:', error);\n      showNotification('Failed to delete note. Please try again.', 'error');\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-gray-900 z-50 flex flex-col\"\n        >\n          {/* Header Bar */}\n          <motion.div \n            initial={{ y: -50, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            className=\"bg-gray-800 border-b-2 border-cyan-400 p-4 flex items-center justify-between flex-shrink-0\"\n            style={{\n              boxShadow: '0 2px 20px rgba(34,211,238,0.3)'\n            }}\n          >\n            <div className=\"flex items-center gap-4\">\n              {/* Back button - already correct */}\n              <button\n                onClick={onClose}\n                className=\"bg-gray-900 border-2 border-cyan-400 p-2 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] text-cyan-400\"\n                style={{\n                  boxShadow: '0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'\n                }}\n                title=\"Back to Library (ESC)\"\n              >\n                <ArrowLeft size={20} className=\"text-cyan-400\" />\n                <div className=\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\" />\n              </button>\n              \n              <div className=\"flex items-center gap-3\">\n                <h1 className=\"font-mono text-2xl font-bold text-white\">\n                  {modalTitle}\n                </h1>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-xs font-mono text-gray-400 hidden sm:flex gap-4\">\n                <span>ESC: Back</span>\n                <span>CTRL+ENTER: Save</span>\n              </div>\n              \n              {/* delete button for editing mode */}\n              {isEditing && (\n                <button\n                  onClick={() => setShowDeleteConfirm(true)}\n                  className=\"bg-gray-900 border-2 border-red-500 px-4 py-2 relative group cursor-pointer transition-all duration-300 hover:border-red-400 hover:shadow-[0_0_15px_rgba(239,68,68,0.3)] font-mono font-bold text-red-500\"\n                  style={{\n                    boxShadow: '0 0 5px rgba(239, 68, 68, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'\n                  }}\n                  title=\"Delete Log Entry\"\n                >\n                  <div className=\"flex items-center gap-2\">\n                    <Trash2 size={16} className=\"text-red-500\" />\n                    <span className=\"text-red-500\">DELETE</span>\n                  </div>\n                  <div className=\"absolute inset-0 bg-red-500 opacity-0 group-hover:opacity-10 transition-opacity\" />\n                </button>\n              )}\n              \n              {/* Save/Create button - fix the text color */}\n              <button\n                type=\"submit\"\n                form=\"note-form\"\n                className=\"bg-gray-900 border-2 border-cyan-400 px-6 py-2 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] font-mono font-bold text-cyan-400\"\n                style={{\n                  boxShadow: '0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'\n                }}\n              >\n                <div className=\"flex items-center gap-2\">\n                  {isEditing ? <Save size={18} className=\"text-cyan-400\" /> : <Plus size={18} className=\"text-cyan-400\" />}\n                  <span className=\"text-cyan-400\">{isEditing ? 'SAVE CHANGES' : 'CREATE ENTRY'}</span>\n                </div>\n                <div className=\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\" />\n              </button>\n            </div>\n          </motion.div>\n\n          {/* Main Content Area - Full screen usage */}\n          <div className=\"flex-1 overflow-hidden flex flex-col\">\n            <motion.div \n              initial={{ y: 20, opacity: 0 }}\n              animate={{ y: 0, opacity: 1 }}\n              transition={{ delay: 0.1 }}\n              className=\"w-full h-full p-3 overflow-hidden flex flex-col\"\n            >\n              <form id=\"note-form\" onSubmit={handleSubmit} className=\"h-full flex flex-col space-y-3\">\n                {/* Title Input */}\n                <div className=\"flex-shrink-0\">\n                  <input\n                    value={noteData.title}\n                    onChange={(e) => setNoteData({ ...noteData, title: e.target.value })}\n                    placeholder=\"Enter your log title...\"\n                    className=\"w-full text-3xl font-mono font-bold bg-transparent border-none outline-none text-white placeholder-gray-500 p-0\"\n                    style={{ \n                      color: '#ffffff !important',\n                      WebkitTextFillColor: '#ffffff',\n                      textFillColor: '#ffffff'\n                    }}\n                    required\n                    autoFocus\n                  />\n                  <div className=\"h-1 bg-gradient-to-r from-cyan-400 to-purple-400 mt-2\" />\n                </div>\n\n                {/* Main Content Layout - More space for content, smaller sidebar */}\n                <div className=\"flex-1 grid grid-cols-1 lg:grid-cols-6 gap-3 overflow-hidden\">\n                  {/* Content Area - Takes up 5/6 of space */}\n                  <div className=\"lg:col-span-5 flex flex-col overflow-hidden\">\n                    <div className=\"bg-gray-800 border-2 border-cyan-400 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] relative flex-1 flex flex-col overflow-hidden\">\n                      <div className=\"absolute inset-0 border-2 border-cyan-400 opacity-20 animate-pulse pointer-events-none\" />\n                      \n                      {/* Header with formatting toolbar */}\n                      <div className=\"flex items-center justify-between p-3 border-b-2 border-gray-700 relative z-10 flex-shrink-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <FileText size={18} className=\"text-cyan-400\" />\n                          <span className=\"font-mono text-sm font-bold text-cyan-400\">LOG CONTENT</span>\n                        </div>\n                        \n                        {/* Formatting Toolbar */}\n                        <div className=\"flex items-center gap-1\">\n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('**', '**', 'bold text')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Bold (Ctrl+B)\"\n                          >\n                            <Bold size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('*', '*', 'italic text')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Italic (Ctrl+I)\"\n                          >\n                            <Italic size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('<u>', '</u>', 'underlined text')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Underline (Ctrl+U)\"\n                          >\n                            <Underline size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('==', '==', 'highlighted text')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Highlight\"\n                          >\n                            <Highlighter size={14} />\n                          </button>\n                          \n                          <div className=\"w-px h-5 bg-gray-600\" />\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('- ', '', '')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Bullet List\"\n                          >\n                            <List size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('1. ', '', '')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Numbered List\"\n                          >\n                            <ListOrdered size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('> ', '', '')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Quote\"\n                          >\n                            <Quote size={14} />\n                          </button>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => insertFormattingHandler('`', '`', 'code')}\n                            className=\"p-1.5 bg-gray-700 border border-gray-600 text-gray-300 hover:text-cyan-400 hover:border-cyan-400 transition-colors\"\n                            title=\"Inline Code (Ctrl+`)\"\n                          >\n                            <Code size={14} />\n                          </button>\n                          \n                          <div className=\"w-px h-5 bg-gray-600\" />\n                          \n                          <button\n                            type=\"button\"\n                            onClick={() => setShowPreview(!showPreview)}\n                            className={`p-1.5 bg-gray-700 border border-gray-600 transition-colors ${\n                              showPreview \n                                ? 'text-cyan-400 border-cyan-400' \n                                : 'text-gray-300 hover:text-cyan-400 hover:border-cyan-400'\n                            }`}\n                            title=\"Toggle Preview\"\n                          >\n                            {showPreview ? <EyeOff size={14} /> : <Eye size={14} />}\n                          </button>\n                        </div>\n                      </div>\n                      \n                      {/* Content Area */}\n                      <div className=\"flex-1 flex relative z-10 overflow-hidden\">\n                        {/* Editor Side */}\n                        <div className={`${showPreview ? 'w-1/2 border-r-2 border-gray-700' : 'w-full'} flex flex-col`}>\n                          <textarea\n                            id=\"content-textarea\"\n                            value={noteData.content}\n                            onChange={(e) => setNoteData({ ...noteData, content: e.target.value })}\n                            onKeyDown={handleKeyDown}\n                            placeholder=\"Start writing your log entry...\n\n**Bold text** or *italic text*\n- Bullet points\n1. Numbered lists\n> Quoted text\n`inline code`\n==highlighted text==\n\nUse the toolbar above or keyboard shortcuts:\n- Ctrl/Cmd + B: Bold\n- Ctrl/Cmd + I: Italic  \n- Ctrl/Cmd + U: Underline\n- Ctrl/Cmd + `: Code\"\n                            className=\"w-full flex-1 bg-transparent border-none outline-none text-white placeholder-gray-400 font-mono text-base resize-none leading-relaxed overflow-y-auto p-4\"\n                            style={{ \n                              color: '#ffffff !important',\n                              WebkitTextFillColor: '#ffffff',\n                              textFillColor: '#ffffff'\n                            }}\n                            required\n                          />\n                        </div>\n                        \n                        {/* Preview Side */}\n                        {showPreview && (\n                          <div className=\"w-1/2 overflow-y-auto p-4 bg-gray-900\">\n                            <div className=\"font-mono text-white leading-relaxed text-base\">\n                              <MarkdownPreview content={noteData.content || '*Start typing to see preview...*'} />\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Sidebar - Takes up 1/6 of space, much smaller and compact */}\n                  <div className=\"lg:col-span-1 overflow-y-auto\">\n                    <div className=\"space-y-2\">\n                      {/* Tags */}\n                      <div className=\"bg-gray-800 border-2 border-gray-600 p-2\">\n                        <label className=\"block text-xs font-mono font-bold text-cyan-400 mb-1\">\n                          <Tag size={12} className=\"inline mr-1\" />\n                          TAGS\n                        </label>\n                        <input\n                          value={noteData.tags}\n                          onChange={(e) => setNoteData({ ...noteData, tags: e.target.value })}\n                          placeholder=\"work, ideas...\"\n                          className=\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\"\n                          style={{ \n                            color: '#ffffff !important',\n                            WebkitTextFillColor: '#ffffff',\n                            textFillColor: '#ffffff'\n                          }}\n                        />\n                      </div>\n\n                      {/* Color Picker */}\n                      <div className=\"bg-gray-800 border-2 border-gray-600 p-2\">\n                        <label className=\"block text-xs font-mono font-bold text-cyan-400 mb-1\">\n                          <Palette size={12} className=\"inline mr-1\" />\n                          COLOR\n                        </label>\n                        \n                        {/* Current Color Display */}\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <div \n                            className=\"w-6 h-4 border-2 border-gray-600\"\n                            style={{ backgroundColor: noteData.color }}\n                            title=\"Current color\"\n                          />\n                          <input\n                            type=\"color\"\n                            value={noteData.color}\n                            onChange={(e) => setNoteData({ ...noteData, color: e.target.value })}\n                            className=\"w-6 h-4 border-2 border-gray-600 bg-transparent cursor-pointer\"\n                            title=\"Custom color picker\"\n                          />\n                          <span className=\"text-xs font-mono text-gray-400\">Custom</span>\n                        </div>\n\n                        {/* Preset Colors Grid */}\n                        <div className=\"grid grid-cols-2 gap-1\">\n                          {colors.map(color => {\n                            const hexToRgb = (hex) => {\n                              const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n                              return result ? \n                                `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` :\n                                '74, 222, 128';\n                            };\n                            \n                            const rgbColor = hexToRgb(color);\n                            \n                            return (\n                              <button\n                                key={color}\n                                type=\"button\"\n                                onClick={() => setNoteData({ ...noteData, color })}\n                                className={`w-full h-6 border-2 transition-all duration-300 relative ${\n                                  noteData.color === color \n                                    ? 'border-white scale-105' \n                                    : 'border-gray-600 hover:border-gray-400'\n                                }`}\n                                style={{ \n                                  backgroundColor: color,\n                                  boxShadow: noteData.color === color \n                                    ? `0 0 15px rgba(${rgbColor}, 0.6), 2px 2px 0px 0px rgba(0,0,0,1)`\n                                    : `0 0 5px rgba(${rgbColor}, 0.3), 1px 1px 0px 0px rgba(0,0,0,1)`\n                                }}\n                                title={color}\n                              >\n                                {noteData.color === color && (\n                                  <div className=\"absolute inset-0 border-2 border-white opacity-60\" />\n                                )}\n                              </button>\n                            );\n                          })}\n                        </div>\n                      </div>\n\n                      {/* Archive Assignment */}\n                      <div className=\"bg-gray-800 border-2 border-gray-600 p-2\">\n                        <label className=\"block text-xs font-mono font-bold text-cyan-400 mb-1\">\n                          <Folder size={12} className=\"inline mr-1\" />\n                          ARCHIVE\n                        </label>\n                        <select\n                          value={noteData.folderId || ''}\n                          onChange={(e) => setNoteData({ \n                            ...noteData, \n                            folderId: e.target.value ? parseInt(e.target.value) : null \n                          })}\n                          className=\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\"\n                          style={{ \n                            color: '#ffffff !important',\n                            WebkitTextFillColor: '#ffffff',\n                            textFillColor: '#ffffff'\n                          }}\n                        >\n                          <option value=\"\">None</option>\n                          {folders.map(folder => (\n                            <option key={folder.id} value={folder.id}>\n                              {folder.name}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      {/* Collection Assignment */}\n                      <div className=\"bg-gray-800 border-2 border-gray-600 p-2\">\n                        <label className=\"block text-xs font-mono font-bold text-cyan-400 mb-1\">\n                          <BookOpen size={12} className=\"inline mr-1\" />\n                          COLLECTION\n                        </label>\n                        <select\n                          value={noteData.notebookId || ''}\n                          onChange={(e) => setNoteData({ \n                            ...noteData, \n                            notebookId: e.target.value ? parseInt(e.target.value) : null \n                          })}\n                          className=\"w-full px-2 py-1 bg-gray-900 border-2 border-gray-600 text-white font-mono text-xs focus:border-cyan-400 focus:outline-none transition-colors\"\n                          style={{ \n                            color: '#ffffff !important',\n                            WebkitTextFillColor: '#ffffff',\n                            textFillColor: '#ffffff'\n                          }}\n                        >\n                          <option value=\"\">None</option>\n                          {notebooks.map(notebook => (\n                            <option key={notebook.id} value={notebook.id}>\n                              {notebook.name}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      {/* Export Section - More compact */}\n                      {isEditing && (\n                        <motion.div \n                          initial={{ opacity: 0, y: 20 }}\n                          animate={{ opacity: 1, y: 0 }}\n                          transition={{ delay: 0.3 }}\n                          className=\"bg-gray-800 border-2 border-gray-600 p-2\"\n                        >\n                          <div className=\"flex items-center gap-1 mb-1\">\n                            <h3 className=\"font-mono text-xs font-bold text-cyan-400\">EXPORT</h3>\n                          </div>\n                          \n                          <button\n                            type=\"button\"\n                            onClick={async () => {\n                              try {\n                                const response = await fetch(`/api/notes/${existingNote.id}/export`);\n                                if (response.ok) {\n                                  const blob = await response.blob();\n                                  const url = window.URL.createObjectURL(blob);\n                                  const a = document.createElement('a');\n                                  a.href = url;\n                                  a.download = `${existingNote.title.replace(/[^a-zA-Z0-9\\s]/g, '').replace(/\\s+/g, '_')}.md`;\n                                  document.body.appendChild(a);\n                                  a.click();\n                                  window.URL.revokeObjectURL(url);\n                                  document.body.removeChild(a);\n                                  showNotification(`\"${existingNote.title}\" exported successfully!`, 'success');\n                                }\n                              } catch (error) {\n                                showNotification('Export failed. Please try again.', 'error');\n                              }\n                            }}\n                            className=\"w-full bg-gray-900 border-2 border-cyan-400 px-2 py-1 relative group cursor-pointer transition-all duration-300 hover:border-cyan-300 hover:shadow-[0_0_15px_rgba(34,211,238,0.3)] font-mono font-bold text-cyan-400 text-xs\"\n                            style={{\n                              boxShadow: '0 0 5px rgba(34, 211, 238, 0.2), 2px 2px 0px 0px rgba(0,0,0,1)'\n                            }}\n                          >\n                            <div className=\"flex items-center justify-center gap-1\">\n                              <FileDown size={10} className=\"text-cyan-400\" />\n                              <span className=\"text-cyan-400\">EXPORT</span>\n                            </div>\n                            <div className=\"absolute inset-0 bg-cyan-400 opacity-0 group-hover:opacity-10 transition-opacity\" />\n                          </button>\n                        </motion.div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </motion.div>\n          </div>\n\n          {/* Delete Confirmation Modal */}\n          {showDeleteConfirm && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60\"\n            >\n              <motion.div\n                initial={{ scale: 0.9, opacity: 0 }}\n                animate={{ scale: 1, opacity: 1 }}\n                className=\"bg-gray-800 border-2 border-red-500 p-6 max-w-md mx-4\"\n                style={{\n                  boxShadow: '0 0 20px rgba(239, 68, 68, 0.3), 4px 4px 0px 0px rgba(0,0,0,1)'\n                }}\n              >\n                <div className=\"text-center\">\n                  <Trash2 size={48} className=\"text-red-500 mx-auto mb-4\" />\n                  <h3 className=\"font-mono text-xl font-bold text-white mb-2\">DELETE LOG ENTRY</h3>\n                  <p className=\"text-gray-300 font-mono mb-4\">\n                    Are you sure you want to permanently delete<br />\n                    <span className=\"text-cyan-400 font-bold\">\"{existingNote?.title}\"</span>?\n                  </p>\n                  <p className=\"text-red-400 text-sm font-mono mb-6\">\n                    This action cannot be undone.\n                  </p>\n                  \n                  <div className=\"flex gap-3 justify-center\">\n                    <button\n                      onClick={() => setShowDeleteConfirm(false)}\n                      className=\"bg-gray-900 border-2 border-gray-600 px-4 py-2 font-mono font-bold text-gray-300 hover:border-gray-500 transition-colors\"\n                    >\n                      <span className=\"text-gray-300\">CANCEL</span>\n                    </button>\n                    <button\n                      onClick={handleDelete}\n                      className=\"bg-gray-900 border-2 border-red-500 px-4 py-2 font-mono font-bold text-red-500 hover:border-red-400 transition-colors\"\n                    >\n                      <span className=\"text-red-500\">DELETE</span>\n                    </button>\n                  </div>\n                </div>\n              </motion.div>\n            </motion.div>\n          )}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default NoteModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}